{"ast":null,"code":"import _defineProperty from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from\"react-router-dom\";import'./signup-page.sass';import{withRouter}from\"react-router\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var source;var Signuppage=/*#__PURE__*/function(_React$Component){_inherits(Signuppage,_React$Component);var _super=_createSuper(Signuppage);function Signuppage(props){var _this;_classCallCheck(this,Signuppage);_this=_super.call(this);_this.state={email:'',pwd:'',pwdRepeat:'',errMsg:''};source=axios.CancelToken.source();_this.registerUser=_this.registerUser.bind(_assertThisInitialized(_this));_this.handleInput=_this.handleInput.bind(_assertThisInitialized(_this));_this.handleError=_this.handleError.bind(_assertThisInitialized(_this));return _this;}_createClass(Signuppage,[{key:\"registerUser\",value:function registerUser(){var _this2=this;var body={email:this.state.email,pwd:this.state.pwd,pwdRepeat:this.state.pwdRepeat};axios.post('/api/users/register',body,{cancelToken:source.token}).then(function(res){localStorage['logged_in']=true;_this2.props.login();_this2.props.history.push('/my-account');// redirect using withRouter and prototypes import\n}).catch(function(error){if(typeof error.response.data!=='undefined')_this2.setState({errMsg:error.response.data});});}},{key:\"handleInput\",value:function handleInput(e){var name=e.target.name;this.setState(_defineProperty({},name,e.target.value));}},{key:\"handleError\",value:function handleError(msg){var _this3=this;if(msg.length>0){var timer=setTimeout(function(){_this3.setState({error:''});},5500);return/*#__PURE__*/_jsx(\"div\",{className:\"logMsg\",children:msg});// output msg\n}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(source)source.cancel();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"signupForm-container\",children:[this.handleError(this.state.errMsg),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",placeholder:\"Email\",value:this.state.email,onChange:this.handleInput}),/*#__PURE__*/_jsx(\"input\",{type:\"Password\",name:\"pwd\",placeholder:\"Password\",value:this.state.pwd,onChange:this.handleInput}),/*#__PURE__*/_jsx(\"input\",{type:\"Password\",name:\"pwdRepeat\",placeholder:\"Repeat Password\",value:this.state.repeatPwd,onChange:this.handleInput}),/*#__PURE__*/_jsx(\"button\",{onClick:this.registerUser,type:\"submit\",name:\"submit\",children:\"Sign up\"}),/*#__PURE__*/_jsx(\"div\",{id:\"linkCon\",children:/*#__PURE__*/_jsx(Link,{id:\"forgotpwd\",to:\"/forgot-password\",children:\"Forgot Password\"})}),/*#__PURE__*/_jsxs(\"div\",{id:\"accountLogin\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"./login-page\",children:\"Log in\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"policyMsg\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"border\"}),\"By signing up, you agree to our \",/*#__PURE__*/_jsx(Link,{to:\"/privacy-policy\",children:\"Terms of Service\"}),\", \",/*#__PURE__*/_jsx(Link,{to:\"/privacy-policy\",children:\"Privacy Policy\"}),\", and \",/*#__PURE__*/_jsx(Link,{to:\"/privacy-policy\",children:\"Cookies Policy\"})]})]});}}]);return Signuppage;}(React.Component);var SignuppageWithRouter=withRouter(Signuppage);export default SignuppageWithRouter;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/signup-page.jsx"],"names":["React","Component","Link","withRouter","axios","source","Signuppage","props","state","email","pwd","pwdRepeat","errMsg","CancelToken","registerUser","bind","handleInput","handleError","body","post","cancelToken","token","then","res","localStorage","login","history","push","catch","error","response","data","setState","e","name","target","value","msg","length","timer","setTimeout","cancel","repeatPwd","SignuppageWithRouter"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './signup-page.sass';\nimport PropTypes from \"prop-types\";\nimport { withRouter } from \"react-router\";\nimport axios from 'axios';\nlet source;\n\nclass Signuppage extends React.Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\temail: '',\n\t\t\tpwd: '',\n\t\t\tpwdRepeat: '',\n\t\t\terrMsg: ''\n\t\t}\n\t\tsource = axios.CancelToken.source();\n\t\tthis.registerUser = this.registerUser.bind(this);\n\t\tthis.handleInput = this.handleInput.bind(this);\n\t\tthis.handleError = this.handleError.bind(this);\n\t}\n\n\tregisterUser() {\n\t    const body = {\n\t    \temail: this.state.email,\n\t        pwd: this.state.pwd,\n\t        pwdRepeat: this.state.pwdRepeat\n\t    }\n\n\t\taxios.post('/api/users/register', body, {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\tlocalStorage['logged_in'] = true;\n\t\t\t\tthis.props.login();\n\t\t\t\tthis.props.history.push('/my-account'); // redirect using withRouter and prototypes import\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (typeof error.response.data !== 'undefined') this.setState({errMsg: error.response.data});\n\t\t\t})\n\t}\n\n\thandleInput(e) {\n\t\tlet name = e.target.name;\n\t\tthis.setState({\n\t\t\t[name]: e.target.value\n\t\t})\n\t}\n\n\thandleError(msg){\n\t\tif (msg.length > 0) {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tthis.setState({\terror: '' });\n\t\t\t}, 5500);\n\t\t\treturn <div className='logMsg'>{msg}</div>; // output msg\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (source) source.cancel();\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"signupForm-container\">\n\t\t\t\t{ this.handleError(this.state.errMsg)}\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tname=\"email\" \n\t\t\t\t\tplaceholder=\"Email\" \n\t\t\t\t\tvalue={this.state.email}\n\t\t\t\t\tonChange={this.handleInput}\n\t\t\t\t/>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"Password\" \n\t\t\t\t\tname=\"pwd\" \n\t\t\t\t\tplaceholder=\"Password\" \n\t\t\t\t\tvalue={this.state.pwd}\n\t\t\t\t\tonChange={this.handleInput}\n\t\t\t\t/>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"Password\" \n\t\t\t\t\tname=\"pwdRepeat\" \n\t\t\t\t\tplaceholder=\"Repeat Password\" \n\t\t\t\t\tvalue={this.state.repeatPwd}\n\t\t\t\t\tonChange={this.handleInput}\n\t\t\t\t/>\n\t\t\t\t<button \n\t\t\t\t\tonClick={this.registerUser} \n\t\t\t\t\ttype=\"submit\" \n\t\t\t\t\tname=\"submit\">\n\t\t\t\t\tSign up\n\t\t\t\t</button>\n\t\t\t\t<div id=\"linkCon\">\n\t\t\t\t\t<Link id=\"forgotpwd\" to=\"/forgot-password\">Forgot Password</Link>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"accountLogin\">\n\t\t\t\t\tAlready have an account? <Link to=\"./login-page\">Log in</Link>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"policyMsg\">\n\t\t\t\t\t<div id=\"border\"></div>\n\t\t\t\t\tBy signing up, you agree to our <Link to='/privacy-policy'>Terms of Service</Link>, <Link to='/privacy-policy'>Privacy Policy</Link>, and <Link to='/privacy-policy'>Cookies Policy</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst SignuppageWithRouter = withRouter(Signuppage);\n\nexport default SignuppageWithRouter;"]},"metadata":{},"sourceType":"module"}