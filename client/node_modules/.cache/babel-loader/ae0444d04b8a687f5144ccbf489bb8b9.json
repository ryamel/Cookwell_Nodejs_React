{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/Documents/cookwell-react-express/client/src/pages/account-pages/my-profile.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './my-profile.sass'; // import photoIcon from '../../media/icons/photo45.png';\n\nimport PhotoShow from '../../components/photoShow';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet source;\n\nclass MyProfile extends Component {\n  constructor() {\n    super();\n    this.state = {\n      defaultEmail: '',\n      defaultName: '',\n      defaultAbout: '',\n      password: '',\n      file: null,\n      fileName: '',\n      fileObjURL: '',\n      errMsg: ''\n    };\n    source = axios.CancelToken.source();\n    this.updateProfile = this.updateProfile.bind(this);\n    this.fileHandler = this.fileHandler.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.email = /*#__PURE__*/React.createRef();\n    this.name = /*#__PURE__*/React.createRef();\n    this.about = /*#__PURE__*/React.createRef();\n    this.fileRef = /*#__PURE__*/React.createRef();\n  }\n\n  fileHandler(event) {\n    if (this.fileRef.current.files[0]) {\n      this.setState({\n        file: event.target.files[0],\n        fileName: this.fileRef.current.files[0].name,\n        fileObjURL: URL.createObjectURL(event.target.files[0])\n      });\n    }\n  }\n\n  componentDidMount() {\n    axios.get('/api/users/getmyuserdata', {\n      cancelToken: source.token\n    }).then(res => {\n      console.log(res.data);\n      this.setState({\n        defaultEmail: res.data.email,\n        defaultName: res.data.name,\n        defaultAbout: res.data.about,\n        fileName: res.data.profileImg\n      });\n    }).catch(error => {\n      //if (error.response.data !== 'undefined') this.setState({errMsg: error.response.data});\n      console.log(error);\n    });\n  }\n\n  updateProfile() {\n    const formData = new FormData();\n    formData.append('email', this.email.current.value);\n    formData.append('name', this.name.current.value);\n    formData.append('about', this.about.current.value);\n    formData.append('password', this.state.password);\n    formData.append('file', this.state.file);\n    axios.post('/api/users/updateprofile', formData, {\n      cancelToken: source.token\n    }).then(res => {\n      this.setState({\n        defaultEmail: res.data.email,\n        defaultName: res.data.name,\n        defaultAbout: res.data.about,\n        fileName: res.data.profileImg,\n        errMsg: 'Profile Updated',\n        password: ''\n      });\n    }).catch(error => {\n      if (typeof error.response.data !== 'undefined') this.setState({\n        errMsg: error.response.data\n      });\n      this.setState({\n        password: ''\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    if (source) source.cancel();\n  }\n\n  handleError(errMsg) {\n    if (errMsg.length > 0) {\n      const timer = setTimeout(() => {\n        this.setState({\n          errMsg: ''\n        });\n      }, 5500);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bannerMsgBar\",\n        children: errMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [this.handleError(this.state.errMsg), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"accountContent minBodyHeight\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"edit-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-account-titles\",\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"std-field-label ph-label\",\n            children: \"Profile photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fieldContainer clearfix\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"pos-img\",\n              children: /*#__PURE__*/_jsxDEV(PhotoShow, {\n                imageType: \"user\",\n                ref: this.fileRef,\n                onChange: this.fileHandler,\n                file: this.state.file,\n                fileName: this.state.fileName,\n                fileObjURL: this.state.fileObjURL\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fieldContainer clearfix\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"std-field-label\",\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"name\",\n              minLength: \"3\",\n              maxLength: \"45\",\n              defaultValue: this.state.defaultName,\n              ref: this.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fieldContainer clearfix\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"std-field-label\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"email\",\n              defaultValue: this.state.defaultEmail,\n              ref: this.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fieldContainer clearfix\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"std-field-label\",\n              children: \"About\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              minLength: \"100\",\n              maxLength: \"500\",\n              name: \"about\",\n              rows: \"7\",\n              cols: \"50\",\n              defaultValue: this.state.defaultAbout,\n              ref: this.about\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"pwdNotice\",\n            children: \"Confirm your account password to update your profile information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fieldContainer clearfix\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Password\",\n              type: \"password\",\n              name: \"pwd\",\n              value: this.state.password,\n              onChange: e => this.setState({\n                password: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"submitr-btn\",\n              type: \"submit\",\n              name: \"submit-accountUpdate\",\n              onClick: this.updateProfile,\n              children: \"Update Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 7\n          }, this), this.state.defaultName == \"\" || this.state.fileName.length < 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"textStyle profileNote\",\n            children: [\"Completing your profile information makes it easier to discover your recipes. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 87\n            }, this), \" Without a \", /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 103\n            }, this), \" the author of your recipes will be listed as 'Anonymous'.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 8\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default MyProfile;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/account-pages/my-profile.jsx"],"names":["React","Component","Link","PhotoShow","axios","source","MyProfile","constructor","state","defaultEmail","defaultName","defaultAbout","password","file","fileName","fileObjURL","errMsg","CancelToken","updateProfile","bind","fileHandler","handleError","email","createRef","name","about","fileRef","event","current","files","setState","target","URL","createObjectURL","componentDidMount","get","cancelToken","token","then","res","console","log","data","profileImg","catch","error","formData","FormData","append","value","post","response","componentWillUnmount","cancel","length","timer","setTimeout","render","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './my-profile.sass';\n// import photoIcon from '../../media/icons/photo45.png';\nimport PhotoShow from '../../components/photoShow';\nimport axios from 'axios';\nlet source;\n\nclass MyProfile extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tdefaultEmail: '',\n\t\t\tdefaultName: '',\n\t\t\tdefaultAbout: '',\n\t\t\tpassword: '',\n\t\t\tfile: null,\n\t\t\tfileName: '',\n\t\t\tfileObjURL: '',\n\t\t\terrMsg: ''\n\t\t}\n\t\tsource = axios.CancelToken.source();\n\t\tthis.updateProfile = this.updateProfile.bind(this);\n\t\tthis.fileHandler = this.fileHandler.bind(this);\n\t\tthis.handleError = this.handleError.bind(this);\n\t\tthis.email = React.createRef();\n\t\tthis.name = React.createRef();\n\t\tthis.about = React.createRef();\n\t\tthis.fileRef = React.createRef();\n\t}\n\n\tfileHandler(event) {\n\t\tif (this.fileRef.current.files[0]) {\n\t   \t\tthis.setState({\n\t\t\t\tfile: event.target.files[0],\n\t\t\t\tfileName: this.fileRef.current.files[0].name,\n\t\t\t\tfileObjURL: URL.createObjectURL(event.target.files[0])\n\t\t\t})\n\t   \t}\n\t}\n\n\n\tcomponentDidMount() {\n\t\taxios.get('/api/users/getmyuserdata', {cancelToken: source.token})\n\t\t \t.then(res => {\n\t\t \t\tconsole.log(res.data);\n\t\t \t\tthis.setState({\n\t\t\t\t\tdefaultEmail: res.data.email,\n\t\t\t\t\tdefaultName: res.data.name,\n\t\t\t\t\tdefaultAbout: res.data.about,\n\t\t\t\t\tfileName: res.data.profileImg\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\t//if (error.response.data !== 'undefined') this.setState({errMsg: error.response.data});\n\t\t\t\tconsole.log(error);\n\t\t\t});\t\n\t}\n\n\n\tupdateProfile() {\n\t\tconst formData = new FormData();\n\t\tformData.append('email', this.email.current.value);\n\t\tformData.append('name', this.name.current.value);\n\t\tformData.append('about', this.about.current.value);\n\t\tformData.append('password', this.state.password);\n\t\tformData.append('file', this.state.file);\n\n\n\t\taxios.post('/api/users/updateprofile', formData, {cancelToken: source.token})\n\t\t \t.then(res => {\n\t\t \t\tthis.setState({\n\t\t\t\t\tdefaultEmail: res.data.email,\n\t\t\t\t\tdefaultName: res.data.name,\n\t\t\t\t\tdefaultAbout: res.data.about,\n\t\t\t\t\tfileName: res.data.profileImg,\n\t\t\t\t\terrMsg: 'Profile Updated',\n\t\t\t\t\tpassword: ''\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (typeof error.response.data !== 'undefined') this.setState({errMsg: error.response.data});\n\t\t\t\tthis.setState({password: ''});\n\t\t\t});\n\t\t\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (source) source.cancel();\n\t}\n\n\n\thandleError(errMsg){\n\t\tif (errMsg.length > 0) {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tthis.setState({errMsg: ''});\n\t\t\t}, 5500);\n\t\t\treturn <div className='bannerMsgBar'>{errMsg}</div>;\n\t\t}\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\n\t\t\t\t{ this.handleError(this.state.errMsg) }\n\n\t\t\t\t<div className=\"accountContent minBodyHeight\">\n\t\t\t\t\t<div id=\"edit-container\">\n\n\t\t\t\t\t\t<div className='my-account-titles'>\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t</div>\n\n\t{/*\t\t\t\t\t<div id=\"emailChangeNotice\">\n\t\t\t            \t To change your email, respond to the verification link sent to the new email. Be sure to check your spam folder.\n\t\t\t            </div>*/}\n\n\n\t\t\t        \t<label className='std-field-label ph-label'>\n\t            \t\t\tProfile photo\n\t         \t\t\t</label>\n\t\t\t        \t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<div className='fieldContainer clearfix'>\n\t\t\t\t\t\t\t<div id='pos-img'>\n\t\t\t\t\t\t\t\t<PhotoShow \n\t\t\t\t\t\t\t\t\timageType='user'\n\t\t\t\t\t\t\t\t\tref={this.fileRef} \n\t\t\t\t\t\t\t\t\tonChange={this.fileHandler}\n\t\t\t\t\t\t\t\t\tfile={this.state.file}\n\t\t\t\t\t\t\t\t\tfileName={this.state.fileName}\n\t\t\t\t\t\t\t\t\tfileObjURL={this.state.fileObjURL}\n\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t<div className='fieldContainer clearfix'>\n\t\t\t\t\t\t\t<label className='std-field-label'>\n\t\t\t\t\t\t\t\tUsername\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\ttype='text' \n\t\t\t\t\t\t\t\tname='name' \n\t\t\t\t\t\t\t\tminLength=\"3\" \n\t\t\t\t\t\t\t\tmaxLength='45'\n\t\t\t\t\t\t\t\tdefaultValue={this.state.defaultName}\n\t\t\t\t\t\t\t\tref={this.name}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t<div className='fieldContainer clearfix'>\n\t\t\t\t\t\t\t<div className='std-field-label'>\n\t\t\t\t\t        \tEmail\n\t\t\t\t\t        </div>\n\t\t\t\t            <input \n\t\t\t\t            \ttype='text' \n\t\t\t\t            \tname='email' \n\t\t\t\t            \tdefaultValue={this.state.defaultEmail}\n\t\t\t\t\t\t\t\tref={this.email}\n\t\t\t\t            \t/>\n\t\t\t            </div>\n\n\n\t\t\t\t\t\t<div className='fieldContainer clearfix'>\n\t\t\t\t\t\t\t<label className='std-field-label'>\n\t\t\t\t\t\t\t\tAbout\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<textarea \n\t\t\t\t\t\t\t\tminLength='100' \n\t\t\t\t\t\t\t\tmaxLength='500' \n\t\t\t\t\t\t\t\tname='about' \n\t\t\t\t\t\t\t\trows='7' \n\t\t\t\t\t\t\t\tcols='50'\n\t\t\t\t\t\t\t\tdefaultValue={this.state.defaultAbout}\n\t\t\t\t\t\t\t\tref={this.about}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</textarea>\t\n\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t<div id='pwdNotice'>\n\t\t\t\t\t\t\tConfirm your account password to update your profile information\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='fieldContainer clearfix'>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tplaceholder='Password'\n\t\t\t\t            \ttype='password' \n\t\t\t\t            \tname='pwd' \n\t\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\t\tonChange={(e) => this.setState({password: e.target.value})}\n\t\t\t\t            \t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button className='submitr-btn' type='submit' name='submit-accountUpdate' onClick={this.updateProfile} >\n\t\t\t\t\t\t\t\tUpdate Account\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{ this.state.defaultName == \"\" || this.state.fileName.length < 1 ?\n\t\t\t\t\t\t\t<div className='textStyle profileNote'>\n\t\t\t\t\t\t\t\tCompleting your profile information makes it easier to discover your recipes. <br/> Without a <i>username</i> the author of your recipes will be \n\t\t\t\t\t\t\t\tlisted as 'Anonymous'.\n\t\t\t\t\t\t\t</div> : null\n\t\t\t\t\t\t}\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\t\t\n\t}\n}\n\n\n\n\n\nexport default MyProfile;\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}