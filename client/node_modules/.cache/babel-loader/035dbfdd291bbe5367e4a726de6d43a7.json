{"ast":null,"code":"import _defineProperty from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from\"react-router-dom\";import{Redirect}from'react-router';import{mealTypes,dietOptions,cuisine}from'../../searchOptions';import'./submit-recipe.sass';import axios from'axios';import{getURLparam}from'../../functions';import DropMenu from'../../components/dropMenu';import MultiSelectMenu from'../../components/multiSelectMenu';import Ingredients from'../../components/ingredients';import Methods from'../../components/method';import Notes from'../../components/notes';import PhotoShow from'../../components/photoShow';import DeleteRecipe from'../../components/deleteRecipe';import Footer from'../../components/footer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var source;var submitRecipe=/*#__PURE__*/function(_React$Component){_inherits(submitRecipe,_React$Component);var _super=_createSuper(submitRecipe);function submitRecipe(props){var _this;_classCallCheck(this,submitRecipe);_this=_super.call(this);_this.state={rid:'',title:'',description:'',mealType:'',diet:[],cuisine:[],servings:'',cookTime:'',ingredients:[{gtext:'',qty:'',unit:''}],method:[''],notes:[''],file:null,fileName:'',fileObjURL:'',error:null,errMsg:'',redirect:false};source=axios.CancelToken.source();_this.fileRef=/*#__PURE__*/React.createRef();_this.handleInput=_this.handleInput.bind(_assertThisInitialized(_this));_this.removeField=_this.removeField.bind(_assertThisInitialized(_this));_this.addField=_this.addField.bind(_assertThisInitialized(_this));_this.fileHandler=_this.fileHandler.bind(_assertThisInitialized(_this));_this.uploadRecipe=_this.uploadRecipe.bind(_assertThisInitialized(_this));_this.saveEdit=_this.saveEdit.bind(_assertThisInitialized(_this));_this.handleError=_this.handleError.bind(_assertThisInitialized(_this));_this.redirect=_this.redirect.bind(_assertThisInitialized(_this));return _this;}_createClass(submitRecipe,[{key:\"redirect\",value:function redirect(){this.setState({redirect:true});}},{key:\"fileHandler\",value:function fileHandler(event){if(this.fileRef.current.files[0]){this.setState({file:event.target.files[0],fileName:this.fileRef.current.files[0].name,fileObjURL:URL.createObjectURL(event.target.files[0])});}}},{key:\"addField\",value:function addField(stateName){var newState=this.state[stateName];stateName=='ingredients'&&newState.push({gtext:'',qty:'',unit:''});stateName=='method'&&newState.push('');stateName=='notes'&&newState.push('');this.setState(_defineProperty({},stateName,newState));}},{key:\"removeField\",value:function removeField(stateName){var newState=this.state[stateName];if(newState.length>1){newState.pop();this.setState(_defineProperty({},stateName,newState));}}},{key:\"handleInput\",value:function handleInput(fieldName,value){var number=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;// ingredients\nif(fieldName==='qty'||fieldName==='unit'||fieldName==='gtext'){var newState=this.state.ingredients;newState[parseInt(number)][fieldName]=value;this.setState({ingredients:newState});return null;}// method\nif(fieldName==='method'){var newState=this.state.method;newState[number]=value;this.setState({method:newState});return null;}// notes\nif(fieldName==='text'){var newState=this.state.notes;newState[number]=value;this.setState({notes:newState});return null;}// title, description, servings, cookTime, mealType\nif(fieldName==='title'||fieldName==='description'||fieldName==='servings'||fieldName==='cookTime'||fieldName==='mealType'){var newState=value;}// diet\nif(fieldName==='diet'){var dietArr=this.state.diet;var ind=dietArr.indexOf(value);if(!dietArr.includes(value)){dietArr.push(value);var newState=dietArr;}else{dietArr.splice(ind,1);var newState=dietArr;}}// cuisine\nif(fieldName==='cuisine'){var cuisineArr=this.state.cuisine;var ind=cuisineArr.indexOf(value);if(!cuisineArr.includes(value)){cuisineArr.push(value);var newState=cuisineArr;}else{cuisineArr.splice(ind,1);var newState=cuisineArr;}}//update state\nthis.setState(_defineProperty({},fieldName,newState));}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var editId=getURLparam('editId');if(editId){axios.get('/api/recipes/getedit/'+encodeURIComponent(editId),{cancelToken:source.token}).then(function(res){_this2.setState({rid:res.data._id,title:res.data.title,description:res.data.description,mealType:res.data.mealType,diet:res.data.diet,cuisine:res.data.cuisine,servings:res.data.servings,cookTime:res.data.cookTime,ingredients:res.data.ingredients,method:res.data.method,notes:res.data.notes,fileName:res.data.img});}).catch(function(err){return console.log(err);});}}},{key:\"uploadRecipe\",value:function uploadRecipe(){var _this3=this;// formData does not suport nested objects, only key/value pairs. So any nested data was turned into json strings. And then converted into objects on the server side\nvar formData=new FormData();formData.append('file',this.state.file);formData.append('title',this.state.title);formData.append('description',this.state.description);formData.append('mealType',this.state.mealType);formData.append('diet',JSON.stringify(this.state.diet));formData.append('cuisine',JSON.stringify(this.state.cuisine));formData.append('servings',this.state.servings);formData.append('cookTime',this.state.cookTime);formData.append('ingredients',JSON.stringify(this.state.ingredients));formData.append('method',JSON.stringify(this.state.method));formData.append('notes',JSON.stringify(this.state.notes));axios.post('/api/recipes/upload',formData,{cancelToken:source.token}).then(function(response){_this3.setState({redirect:true});// redirect back to my-account page and display success msg on page})\n}).catch(function(error){console.log(error.response.data);if(error.response.data!=='undefined'){_this3.setState({error:true,errMsg:error.response.data});}});}},{key:\"saveEdit\",value:function saveEdit(){var _this4=this;console.log('attempt');var fdata=new FormData();fdata.append('file',this.state.file);fdata.append('title',this.state.title);fdata.append('rid',this.state.rid);fdata.append('description',this.state.description);fdata.append('mealType',this.state.mealType);fdata.append('diet',JSON.stringify(this.state.diet));fdata.append('cuisine',JSON.stringify(this.state.cuisine));fdata.append('servings',this.state.servings);fdata.append('cookTime',this.state.cookTime);fdata.append('ingredients',JSON.stringify(this.state.ingredients));fdata.append('method',JSON.stringify(this.state.method));fdata.append('notes',JSON.stringify(this.state.notes));axios.post('/api/recipes/saveEdit',fdata,{cancelToken:source.token},{headers:{'Content-Type':'application/json'}}).then(function(res){_this4.setState({redirect:true// redirect back to my-account page and display success msg on page\n});}).catch(function(error){if(typeof error.response.data!=='undefined'){_this4.setState({error:true,errMsg:error.response.data});}else{console.log(error);}});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(source)source.cancel();}},{key:\"handleError\",value:function handleError(error,msg){var _this5=this;if(error){var timer=setTimeout(function(){_this5.setState({// remove error msg\nerror:false,errMsg:''});},5500);return/*#__PURE__*/_jsx(\"div\",{className:\"bannerMsgBar\",children:msg});}}},{key:\"render\",value:function render(){var _this6=this;if(this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/my-account\"}});}else{return/*#__PURE__*/_jsxs(React.Fragment,{children:[this.handleError(this.state.error,this.state.errMsg),/*#__PURE__*/_jsx(\"div\",{className:\"accountContent\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"submit-container\",children:[/*#__PURE__*/_jsx(DeleteRecipe,{edit:this.props.edit,rid:this.state.rid,redirect:this.redirect}),this.props.edit?/*#__PURE__*/_jsx(\"div\",{className:\"my-account-titles\",children:\"Edit Recipe\"}):/*#__PURE__*/_jsx(\"div\",{className:\"my-account-titles\",children:\"Submit Recipe\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"req-note\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"requiredStar\",children:\"*\"}),\"Required\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subRec-field-container\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"img-pos\",children:/*#__PURE__*/_jsx(PhotoShow,{imageType:\"recipe\",ref:this.fileRef,onChange:this.fileHandler,file:this.state.file,fileName:this.state.fileName,fileObjURL:this.state.fileObjURL})}),/*#__PURE__*/_jsxs(\"label\",{className:\"std-field-label pos-photo-title\",children:[\"Photo\",/*#__PURE__*/_jsx(\"span\",{className:\"requiredStar\",children:\" *\"}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subRec-field-container title clearfix\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"std-field-label\",children:[\"Title\",/*#__PURE__*/_jsx(\"span\",{className:\"requiredStar\",children:\" *\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"titleInput\",type:\"text\",name:\"title\",maxLength:\"80\",value:this.state.title,onChange:function onChange(e){return _this6.handleInput(e.target.name,e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subRec-field-container description clearfix\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"std-field-label\",children:[\"Description\",/*#__PURE__*/_jsx(\"span\",{className:\"requiredStar\",children:\" *\"})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",rows:\"4\",cols:\"54\",maxLength:\"500\",minLength:\"100\",value:this.state.description,onChange:function onChange(e){return _this6.handleInput(e.target.name,e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subRec-field-container servings\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"std-field-label\",children:[\"Servings\",/*#__PURE__*/_jsx(\"span\",{className:\"requiredStar\",children:\" *\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"pos-input\",type:\"text\",name:\"servings\",placeholder:\"example 1-9 persons or 24 Cookies\",maxLength:\"40\",value:this.state.servings,onChange:function onChange(e){return _this6.handleInput(e.target.name,e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subRec-field-container time\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"std-field-label\",children:[\"Cook & Preparation Time\",/*#__PURE__*/_jsx(\"span\",{className:\"requiredStar\",children:\" *\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"pos-input cookTime-input\",type:\"text\",name:\"cookTime\",placeholder:\"minutes\",maxLength:\"3\",value:this.state.cookTime,onChange:function onChange(e){return _this6.handleInput(e.target.name,e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subRec-field-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sub-subRec-field-container\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"subRec-title std-field-label\",children:[\"Meal Type\",/*#__PURE__*/_jsx(\"span\",{className:\"requiredStar\",children:\" *\"})]}),mealTypes.map(function(mealType,index){return/*#__PURE__*/_jsxs(\"label\",{className:\"check-container\",children:[mealType,/*#__PURE__*/_jsx(\"input\",{name:\"mealType\",value:mealType,type:\"checkbox\",checked:_this6.state.mealType===mealType,onChange:function onChange(e){return _this6.handleInput(e.target.name,e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"})]},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sub-subRec-field-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"subRec-title std-field-label\",children:\"Dietary\"}),/*#__PURE__*/_jsx(MultiSelectMenu,{name:\"diet\",options:dietOptions,handleInput:function handleInput(e){return _this6.handleInput(e.target.name,e.target.value);},state:this.state.diet})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sub-subRec-field-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"subRec-title std-field-label\",children:\"Cuisine\"}),/*#__PURE__*/_jsx(MultiSelectMenu,{name:\"cuisine\",options:cuisine,handleInput:function handleInput(e){return _this6.handleInput(e.target.name,e.target.value);},state:this.state.cuisine})]})]}),/*#__PURE__*/_jsx(Ingredients,{addField:this.addField,ingredients:this.state.ingredients,handleInput:this.handleInput,removeField:this.removeField}),/*#__PURE__*/_jsx(Methods,{addField:this.addField,removeField:this.removeField,handleInput:this.handleInput,methods:this.state.method}),/*#__PURE__*/_jsx(Notes,{addField:this.addField,removeField:this.removeField,handleInput:this.handleInput,notes:this.state.notes}),this.props.edit?/*#__PURE__*/_jsx(\"button\",{className:\"submitr-btn\",type:\"submit\",name:\"submit_edit\",onClick:this.saveEdit,children:\"Save Changes\"}):/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"submitr-btn\",type:\"submit\",name:\"submit\",onClick:this.uploadRecipe,children:\"Submit Recipe\"}),/*#__PURE__*/_jsx(\"div\",{id:\"submit-note\",children:/*#__PURE__*/_jsxs(\"div\",{children:[\"Once submitted, recipes are reviewed for grammar and clarity.\",/*#__PURE__*/_jsx(\"br\",{}),\"Please be patient while recipies upload.\"]})})]})]})})]});}}}]);return submitRecipe;}(React.Component);export default submitRecipe;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/account-pages/submit-recipe.jsx"],"names":["React","Link","Redirect","mealTypes","dietOptions","cuisine","axios","getURLparam","DropMenu","MultiSelectMenu","Ingredients","Methods","Notes","PhotoShow","DeleteRecipe","Footer","source","submitRecipe","props","state","rid","title","description","mealType","diet","servings","cookTime","ingredients","gtext","qty","unit","method","notes","file","fileName","fileObjURL","error","errMsg","redirect","CancelToken","fileRef","createRef","handleInput","bind","removeField","addField","fileHandler","uploadRecipe","saveEdit","handleError","setState","event","current","files","target","name","URL","createObjectURL","stateName","newState","push","length","pop","fieldName","value","number","parseInt","dietArr","ind","indexOf","includes","splice","cuisineArr","editId","get","encodeURIComponent","cancelToken","token","then","res","data","_id","img","catch","err","console","log","formData","FormData","append","JSON","stringify","post","response","fdata","headers","cancel","msg","timer","setTimeout","pathname","edit","e","map","index","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Redirect } from 'react-router'\nimport { mealTypes, dietOptions, cuisine } from '../../searchOptions';\nimport './submit-recipe.sass';\nimport axios from 'axios';\nimport { getURLparam } from '../../functions';\n\nimport DropMenu from '../../components/dropMenu';\nimport MultiSelectMenu from '../../components/multiSelectMenu';\nimport Ingredients from '../../components/ingredients';\nimport Methods from '../../components/method';\nimport Notes from '../../components/notes';\nimport PhotoShow from '../../components/photoShow';\nimport DeleteRecipe from '../../components/deleteRecipe';\nimport Footer from '../../components/footer';\nlet source;\n\n\n\nclass submitRecipe extends React.Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\trid: '',\n\t\t\ttitle: '',\n\t\t\tdescription: '',\n\t\t\tmealType: '',\n\t\t\tdiet: [],\n\t\t\tcuisine: [],\t\n\t\t\tservings: '',\t\t\t\n\t\t\tcookTime: '',\n\t\t\tingredients: [{gtext: '', qty: '', unit: ''}],\n\t\t\tmethod: [''],\n\t\t\tnotes: [''],\n\t\t\tfile: null,\n\t\t\tfileName: '',\n\t\t\tfileObjURL: '',\n\t\t\terror: null,\n\t\t\terrMsg: '',\n\t\t\tredirect: false\n\t\t};\n\t\tsource = axios.CancelToken.source();\n\t\tthis.fileRef = React.createRef();\n\t\tthis.handleInput = this.handleInput.bind(this);\n\t\tthis.removeField = this.removeField.bind(this);\n\t\tthis.addField = this.addField.bind(this);\n\t\tthis.fileHandler = this.fileHandler.bind(this);\n\t\tthis.uploadRecipe = this.uploadRecipe.bind(this);\n\t\tthis.saveEdit = this.saveEdit.bind(this);\n\t\tthis.handleError = this.handleError.bind(this);\n\t\tthis.redirect = this.redirect.bind(this);\n\t}\n\n\tredirect() {\n\t\tthis.setState({redirect: true});\n\t}\n\n\tfileHandler(event) {\n\t\tif (this.fileRef.current.files[0]) {\n\t   \t\tthis.setState({\n\t   \t\t\tfile: event.target.files[0],\n\t   \t\t\tfileName: this.fileRef.current.files[0].name,\n\t   \t\t\tfileObjURL: URL.createObjectURL(event.target.files[0])\n\t\t\t})\n\t   \t}\n\t}\n\n\taddField(stateName) {\n\t\tvar newState = this.state[stateName];\n\t\tstateName == 'ingredients' && newState.push( {gtext: '', qty: '', unit: ''} );\n\t\tstateName == 'method' && newState.push('');\n\t\tstateName == 'notes' && newState.push('');\n\t\tthis.setState({[stateName]: newState});\n\t}\n\n\tremoveField(stateName) {\n\t\tvar newState = this.state[stateName];\n\t\tif (newState.length > 1) {\n\t\t\tnewState.pop();\n\t\t\tthis.setState({[stateName]: newState});\n\t\t}\n\t}\n\n\n\thandleInput(fieldName, value, number = null) {\n\t\t// ingredients\n\t\tif (fieldName === 'qty' || fieldName === 'unit' || fieldName === 'gtext') {\n\t\t\tvar newState = this.state.ingredients;\n\t\t\tnewState[parseInt(number)][fieldName] = value;\n\t\t\tthis.setState({ingredients: newState});\t\n\t\t\treturn null;\n\t\t}\n\t\t// method\n\t\tif (fieldName === 'method') {\n\t\t\tvar newState = this.state.method;\n\t\t\tnewState[number] = value;\n\t\t\tthis.setState({method: newState});\t\n\t\t\treturn null;\n\t\t}\n\t\t// notes\n\t\tif (fieldName === 'text') {\n\t\t\tvar newState = this.state.notes;\n\t\t\tnewState[number] = value;\n\t\t\tthis.setState({notes: newState});\t\n\t\t\treturn null;\n\t\t}\n\t\t// title, description, servings, cookTime, mealType\n\t\tif (fieldName === 'title' || fieldName === 'description' || fieldName === 'servings' || fieldName === 'cookTime' || fieldName === 'mealType') {\n\t\t\tvar newState = value;\n\t\t}\n\t\t// diet\n\t\tif (fieldName === 'diet') {\n\t\t\tvar dietArr = this.state.diet;\n\t\t\tvar ind = dietArr.indexOf(value);\n\t\t\tif (!dietArr.includes(value)) {\n\t\t\t\tdietArr.push(value);\n\t\t\t\tvar newState = dietArr;\n\t\t\t} else {\n\t\t\t\tdietArr.splice(ind, 1);\n\t\t\t\tvar newState = dietArr;\n\t\t\t}\n\t\t}\n\t\t// cuisine\n\t\tif (fieldName === 'cuisine') {\n\t\t\tvar cuisineArr = this.state.cuisine;\n\t\t\tvar ind = cuisineArr.indexOf(value);\n\t\t\tif (!cuisineArr.includes(value)) {\n\t\t\t\tcuisineArr.push(value);\n\t\t\t\tvar newState = cuisineArr;\n\t\t\t} else {\n\t\t\t\tcuisineArr.splice(ind, 1);\n\t\t\t\tvar newState = cuisineArr;\n\t\t\t}\n\t\t}\n\n\t\t//update state\n\t\tthis.setState({\n\t\t\t[fieldName]: newState\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tlet editId = getURLparam('editId');\n\t\tif (editId) {\n\t\t\taxios.get('/api/recipes/getedit/' + encodeURIComponent(editId), {cancelToken: source.token})\t\t\t\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\trid: res.data._id,\n\t\t\t\t\t\ttitle: res.data.title,\n\t\t\t\t\t\tdescription: res.data.description,\n\t\t\t\t\t\tmealType: res.data.mealType,\n\t\t\t\t\t\tdiet: res.data.diet,\n\t\t\t\t\t\tcuisine: res.data.cuisine,\n\t\t\t\t\t\tservings: res.data.servings,\n\t\t\t\t\t\tcookTime: res.data.cookTime,\n\t\t\t\t\t\tingredients: res.data.ingredients,\n\t\t\t\t\t\tmethod: res.data.method,\n\t\t\t\t\t\tnotes: res.data.notes, \n\t\t\t\t\t\tfileName: res.data.img\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\n\t\t}\n\t}\n\n\tuploadRecipe() {\n\t\t// formData does not suport nested objects, only key/value pairs. So any nested data was turned into json strings. And then converted into objects on the server side\n\t\tvar formData = new FormData();\n   \t\tformData.append('file', this.state.file);\n   \t\tformData.append('title', this.state.title);\n   \t\tformData.append('description', this.state.description);\n   \t\tformData.append('mealType', this.state.mealType);\n   \t\tformData.append('diet', JSON.stringify(this.state.diet));\n   \t\tformData.append('cuisine', JSON.stringify(this.state.cuisine));\n   \t\tformData.append('servings', this.state.servings);\n   \t\tformData.append('cookTime', this.state.cookTime);\n   \t\tformData.append('ingredients', JSON.stringify(this.state.ingredients));\n   \t\tformData.append('method', JSON.stringify(this.state.method));\n   \t\tformData.append('notes', JSON.stringify(this.state.notes));\n\n\n\t\taxios.post('/api/recipes/upload', formData, {cancelToken: source.token})\n\t \t.then(response => {\n\t \t\tthis.setState({redirect: true}) // redirect back to my-account page and display success msg on page})\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.log(error.response.data); \n\t\t\tif (error.response.data !== 'undefined') {\n\t\t\t\tthis.setState({\n\t\t\t\t\terror: true,\n\t\t\t\t\terrMsg: error.response.data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tsaveEdit() {\n\t\tconsole.log('attempt');\n\t\tvar fdata = new FormData();\n\t\tfdata.append('file', this.state.file);\n   \t\tfdata.append('title', this.state.title);\n   \t\tfdata.append('rid', this.state.rid);\n   \t\tfdata.append('description', this.state.description);\n   \t\tfdata.append('mealType', this.state.mealType);\n   \t\tfdata.append('diet', JSON.stringify(this.state.diet));\n   \t\tfdata.append('cuisine', JSON.stringify(this.state.cuisine));\n   \t\tfdata.append('servings', this.state.servings);\n   \t\tfdata.append('cookTime', this.state.cookTime);\n   \t\tfdata.append('ingredients', JSON.stringify(this.state.ingredients));\n   \t\tfdata.append('method', JSON.stringify(this.state.method));\n   \t\tfdata.append('notes', JSON.stringify(this.state.notes));\n\n\n   \t\taxios.post('/api/recipes/saveEdit', fdata, {cancelToken: source.token}, { headers: {'Content-Type': 'application/json'} } )\n\t\t \t.then(res => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tredirect: true // redirect back to my-account page and display success msg on page\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (typeof error.response.data !== 'undefined') {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terror: true,\n\t\t\t\t\t\terrMsg: error.response.data\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (source) source.cancel();\n\t}\n\n\t\n\thandleError(error, msg){\n\t\tif (error) {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tthis.setState({\t// remove error msg\n\t\t\t\t\terror: false,\n\t\t\t\t\terrMsg: ''\n\t\t\t\t});\n\t\t\t}, 5500);\n\t\t\treturn <div className='bannerMsgBar'>{msg}</div>;\n\t\t}\n\t}\n\n\n\trender() {\n\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to={{pathname: \"/my-account\"}} />;\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\n\t\t\t\t\t{ this.handleError(this.state.error, this.state.errMsg) }\n\n\t\t\t\t\t<div className=\"accountContent\">\n\t\t\t\t\t\t<div id=\"submit-container\">\n\t\t\t\t\t\t\t\n\t\t\t           \t\t<DeleteRecipe \n\t\t\t           \t\t\tedit={this.props.edit}\n\t\t\t           \t\t\trid={this.state.rid}\n\t\t\t           \t\t\tredirect={this.redirect}\n\t\t\t           \t\t\t/>\n\n\t\t\t\t            {\tthis.props.edit\n\t\t\t\t            \t\t? <div className='my-account-titles'>Edit Recipe</div>\n\t\t\t\t            \t\t: <div className='my-account-titles'>Submit Recipe</div>\t\t            \t\n\t\t\t\t            }\n\n\t\t\t\t            <div id=\"req-note\">\n\t\t\t\t\t\t\t\t<span className=\"requiredStar\">*</span> \n\t\t\t\t\t\t\t\tRequired\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t<div className='subRec-field-container'>\n\t\t\t\t\t\t\t\t<div id='img-pos'> \n\t\t\t\t\t\t\t\t\t<PhotoShow \n\t\t\t\t\t\t\t\t\t\timageType='recipe'\n\t\t\t\t\t\t\t\t\t\tref={this.fileRef} \n\t\t\t\t\t\t\t\t\t\tonChange={this.fileHandler}\n\t\t\t\t\t\t\t\t\t\tfile={this.state.file}\n\t\t\t\t\t\t\t\t\t\tfileName={this.state.fileName}\n\t\t\t\t\t\t\t\t\t\tfileObjURL={this.state.fileObjURL}\n\t\t\t\t\t\t\t\t\t\t/> \n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<label className='std-field-label pos-photo-title'>Photo<span className='requiredStar'> *</span> </label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t               \n\n\n\t\t\t\t        \n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t<div className=\"subRec-field-container title clearfix\">\n\t\t\t\t\t\t\t\t<label className='std-field-label'>\n\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t\t<span className=\"requiredStar\"> *</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tid=\"titleInput\" \n\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\tname=\"title\" \n\t\t\t\t\t\t\t\t\tmaxLength=\"80\" \n\t\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t\t<div className=\"subRec-field-container description clearfix\">\n\t\t\t\t\t\t\t\t<label className='std-field-label'>\n\t\t\t\t\t\t\t\t\tDescription\n\t\t\t\t\t\t\t\t\t<span className=\"requiredStar\"> *</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<textarea \n\t\t\t\t\t\t\t\t\tname=\"description\" \n\t\t\t\t\t\t\t\t\trows=\"4\" \n\t\t\t\t\t\t\t\t\tcols=\"54\" \n\t\t\t\t\t\t\t\t\tmaxLength=\"500\" \n\t\t\t\t\t\t\t\t\tminLength=\"100\" \n\t\t\t\t\t\t\t\t\tvalue={this.state.description}\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t</div>\n\n\n\n\n\n\t\t\t\t\t\t\t<div className=\"subRec-field-container servings\">\n\t\t\t\t\t\t\t\t<label className='std-field-label'>\n\t\t\t\t\t\t\t\t\tServings\n\t\t\t\t\t\t\t\t\t<span className=\"requiredStar\"> *</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tclassName='pos-input'\n\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\tname=\"servings\"\n\t\t\t\t\t\t\t\t\tplaceholder='example 1-9 persons or 24 Cookies' \n\t\t\t\t\t\t\t\t\tmaxLength=\"40\" \n\t\t\t\t\t\t\t\t\tvalue={this.state.servings}\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\n\n\n\t\t\t\t            <div className=\"subRec-field-container time\">\n\t\t\t\t               \t<label className='std-field-label'>\n\t\t\t\t               \t\tCook & Preparation Time\n\t\t\t\t               \t\t<span className=\"requiredStar\"> *</span>\n\t\t\t\t               \t</label>\n\t\t\t\t            \t<input \n\t\t\t\t            \t\tclassName=\"pos-input cookTime-input\" \n\t\t\t\t            \t\ttype=\"text\" \n\t\t\t\t            \t\tname=\"cookTime\" \n\t\t\t\t            \t\tplaceholder='minutes'\n\t\t\t\t            \t\tmaxLength=\"3\" \n\t\t\t\t            \t\tvalue={this.state.cookTime}\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t            \t\t/>\n\t\t\t\t            </div>\n\n\t\t\t\t\t\t\t<div className=\"subRec-field-container\">\n\n\t\t\t\t\t\t\t\t<div className=\"sub-subRec-field-container\">\n\t\t\t\t\t\t \t\t\t<label className='subRec-title std-field-label'>\n\t\t\t\t\t\t\t\t\t\tMeal Type\n\t\t\t\t\t\t\t\t\t\t<span className=\"requiredStar\"> *</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t{ \tmealTypes.map((mealType, index) => \n\t\t\t\t\t\t\t\t\t\t\t<label key={index} className=\"check-container\">\n\t\t\t\t\t\t\t\t\t\t\t\t{mealType}\n\t\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"mealType\" \n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={mealType} \n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={this.state.mealType === mealType} \n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"sub-subRec-field-container\">\n\t\t\t\t\t\t\t\t\t<label className='subRec-title std-field-label'>\n\t\t\t\t\t\t\t\t\t\tDietary\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<MultiSelectMenu \n\t\t\t\t\t\t\t\t\t\tname='diet'\n\t\t\t\t\t\t\t\t\t\toptions={dietOptions}\n\t\t\t\t\t\t\t\t\t\thandleInput={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t\tstate={this.state.diet}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"sub-subRec-field-container\">\n\t\t\t\t\t\t\t\t\t<label className='subRec-title std-field-label'>\n\t\t\t\t\t\t\t\t\t\tCuisine\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<MultiSelectMenu \n\t\t\t\t\t\t\t\t\t\tname='cuisine'\n\t\t\t\t\t\t\t\t\t\toptions={cuisine}\n\t\t\t\t\t\t\t\t\t\thandleInput={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t\tstate={this.state.cuisine}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t<Ingredients \n\t\t\t\t\t\t\t\taddField={this.addField} \n\t\t\t\t\t\t\t\tingredients={this.state.ingredients} \n\t\t\t\t\t\t\t\thandleInput={this.handleInput} \n\t\t\t\t\t\t\t\tremoveField={this.removeField}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Methods\n\t\t\t\t\t\t\t\taddField={this.addField}\n\t\t\t\t\t\t\t\tremoveField={this.removeField}\n\t\t\t\t\t\t\t\thandleInput={this.handleInput}\n\t\t\t\t\t\t\t\tmethods={this.state.method}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Notes \n\t\t\t\t\t\t\t\taddField={this.addField}\n\t\t\t\t\t\t\t\tremoveField={this.removeField}\n\t\t\t\t\t\t\t\thandleInput={this.handleInput}\n\t\t\t\t\t\t\t\tnotes={this.state.notes}\n\t\t\t\t\t\t\t\t/>\n\n\n\n\t\t\t\t   \t\t\t{\tthis.props.edit\n\t\t\t\t            \t? <button className=\"submitr-btn\" type=\"submit\" name=\"submit_edit\" onClick={this.saveEdit}>Save Changes</button>\n\t\t\t\t            \t: <React.Fragment>\n\t\t\t\t            \t\t<button className=\"submitr-btn\" type=\"submit\" name=\"submit\" onClick={this.uploadRecipe}>Submit Recipe</button>\n\t\t\t\t            \t\t<div id=\"submit-note\">\n\t\t\t\t            \t\t\t<div>\n\t\t\t\t            \t\t\t\tOnce submitted, recipes are reviewed for grammar and clarity.\n\t\t\t\t            \t\t\t\t<br/>Please be patient while recipies upload.\n\t\t\t\t            \t\t\t</div>\n\t\t\t\t            \t\t</div>  \n\t\t\t\t            \t  </React.Fragment> \n\t\t\t\t            }\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t{/*\t\t\t\t<Footer isLoaded={true} />*/}\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\n\n\n\n\n\nexport default submitRecipe;\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}