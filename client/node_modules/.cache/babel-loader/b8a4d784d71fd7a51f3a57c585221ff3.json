{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/Documents/cookwell-react-express/client/src/pages/recipes.jsx\";\nimport React, { Component } from \"react\";\nimport BrowseCard from '../components/browseCard';\nimport './recipes.sass';\nimport Footer from '../components/footer';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet source; // added task. Pagination using random recipes.\n\nclass Recipes extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cardData: [],\n      isLoaded: false,\n      loadFooter: false,\n      atBottom: false,\n      height: window.innerHeight,\n      skip: 0,\n      limit: 20\n    };\n    source = axios.CancelToken.source();\n    this.handleScroll = this.handleScroll.bind(this);\n    this.loadMoreRecipes = this.loadMoreRecipes.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this.handleScroll);\n    axios.get(\"/api/recipes/page/0/\" + this.state.limit, {\n      cancelToken: source.token\n    }).then(res => {\n      this.setState(prevState => ({\n        cardData: res.data,\n        isLoaded: true,\n        loadFooter: true,\n        skip: prevState.skip + prevState.limit\n      }));\n    });\n  }\n\n  loadMoreRecipes() {\n    axios.get(\"/api/recipes/page/\" + this.state.skip + \"/\" + this.state.limit, {\n      cancelToken: source.token\n    }).then(res => {\n      this.setState(prevState => ({\n        cardData: prevState.cardData.concat(res.data),\n        skip: prevState.skip + prevState.limit\n      }), console.log(this.state.cardData));\n    });\n  }\n\n  componentWillUnmount() {\n    if (source) source.cancel();\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll() {\n    const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    const windowBottom = windowHeight + window.pageYOffset;\n\n    if (windowBottom >= docHeight) {\n      console.log('bottom');\n      this.loadMoreRecipes();\n    }\n  }\n\n  render() {\n    const {\n      isLoaded\n    } = this.state;\n\n    if (!isLoaded) {\n      return null;\n    } else {\n      const {\n        cardData\n      } = this.state; //console.log(cardData)\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"browse-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recipe-grid-container\",\n          children: cardData.map((card, index) => /*#__PURE__*/_jsxDEV(BrowseCard, {\n            img: card.img,\n            description: card.description,\n            author: card.authid.name,\n            aId: card.authid._id,\n            rtitle: card.title,\n            index: index,\n            edit: false\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 8\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this);\n    }\n  }\n\n}\n\nexport default Recipes;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/recipes.jsx"],"names":["React","Component","BrowseCard","Footer","axios","source","Recipes","constructor","props","state","cardData","isLoaded","loadFooter","atBottom","height","window","innerHeight","skip","limit","CancelToken","handleScroll","bind","loadMoreRecipes","componentDidMount","addEventListener","get","cancelToken","token","then","res","setState","prevState","data","concat","console","log","componentWillUnmount","cancel","removeEventListener","windowHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","render","map","card","index","img","description","authid","name","_id","title"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport BrowseCard from '../components/browseCard';\nimport './recipes.sass';\nimport Footer from '../components/footer';\nimport axios from 'axios';\nlet source;\n// added task. Pagination using random recipes.\n\n\nclass Recipes extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcardData: [],\n\t\t\tisLoaded: false,\n\t\t\tloadFooter: false,\n\t\t\tatBottom: false,\n\t\t\theight: window.innerHeight,\n\t\t\tskip: 0,\n\t\t\tlimit: 20\n\t\t}\n\t\tsource = axios.CancelToken.source();\n\t\tthis.handleScroll = this.handleScroll.bind(this);\n\t\tthis.loadMoreRecipes = this.loadMoreRecipes.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener(\"scroll\", this.handleScroll);\n\t\t\n\t\taxios.get(\"/api/recipes/page/0/\" + this.state.limit, {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\t\tthis.setState(prevState => ({\n\t\t\t\t\t\tcardData: res.data,\n\t\t\t\t\t\tisLoaded: true,\n\t\t\t\t\t\tloadFooter: true,\n\t\t\t\t\t\tskip: prevState.skip + prevState.limit\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t)\n\t}\n\n\tloadMoreRecipes() { \n\t\taxios.get(\"/api/recipes/page/\" + this.state.skip + \"/\" + this.state.limit, {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\t\tthis.setState(prevState => ({\n\t\t\t\t\t\tcardData: prevState.cardData.concat(res.data),\n\t\t\t\t\t\tskip: prevState.skip + prevState.limit\n\t\t\t\t\t}), console.log(this.state.cardData));\n\t\t\t\t}\n\t\t\t)\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (source) source.cancel();\n\t    window.removeEventListener(\"scroll\", this.handleScroll);\n\t}\n\n\n\thandleScroll() {\n        const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n        const body = document.body;\n        const html = document.documentElement;\n        const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n        const windowBottom = windowHeight + window.pageYOffset;\n        if (windowBottom >= docHeight ) {\n            console.log('bottom');\n            this.loadMoreRecipes();\n        }\n    }\n\n\n\trender() {\n\t\tconst {isLoaded } = this.state;\n\n\t\tif (!isLoaded) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst { cardData } = this.state;\n\t\t\t//console.log(cardData)\n\t\t\treturn (\n\t\t\t\t<div className='browse-body'>\n\t\t\t\t\t<div className='recipe-grid-container' >\n\t\t\t\t\t\t{cardData.map((card, index) => \n\t\t\t\t\t\t\t<BrowseCard \n\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\timg={card.img} \n\t\t\t\t\t\t\t\tdescription={card.description} \n\t\t\t\t\t\t\t\tauthor={card.authid.name} \n\t\t\t\t\t\t\t\taId={card.authid._id} \n\t\t\t\t\t\t\t\trtitle={card.title} \n\t\t\t\t\t\t\t\tindex={index} \n\t\t\t\t\t\t\t\tedit={false}\n\t\t\t\t\t\t\t\t/>\t\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{/*<Footer isLoaded={this.state.loadFooter} />*/}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n\n\n\n\n\n\nexport default Recipes;"]},"metadata":{},"sourceType":"module"}