{"ast":null,"code":"import _classCallCheck from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import BrowseCard from'../components/browseCard';import'./featured.sass';import Footer from'../components/footer';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var source;// featured titles need to be added inside the browseCard on the first of the line\nvar Featured=/*#__PURE__*/function(_Component){_inherits(Featured,_Component);var _super=_createSuper(Featured);function Featured(props){var _this;_classCallCheck(this,Featured);_this=_super.call(this);_this.state={featCardData:[],latestCardData:[],randomCardData:[],loadFooter:false};source=axios.CancelToken.source();_this.getFeatured=_this.getFeatured.bind(_assertThisInitialized(_this));_this.getLatest=_this.getLatest.bind(_assertThisInitialized(_this));_this.getMixItUp=_this.getMixItUp.bind(_assertThisInitialized(_this));return _this;}_createClass(Featured,[{key:\"getFeatured\",value:function getFeatured(){var _this2=this;axios.get(\"/api/recipes/getfeatured/\",{cancelToken:source.token}).then(function(res){console.log('featured',res.data);_this2.setState({featCardData:res.data});}).catch(function(err){return console.log(err);});}},{key:\"getLatest\",value:function getLatest(){var _this3=this;axios.get(\"/api/recipes/getrecent/\",{cancelToken:source.token}).then(function(res){console.log('recent',res.data);_this3.setState({latestCardData:res.data});}).catch(function(err){return console.log(err);});}},{key:\"getMixItUp\",value:function getMixItUp(){var _this4=this;axios.get(\"/api/recipes/getrandom/\",{cancelToken:source.token}).then(function(res){console.log('random',res.data);_this4.setState({randomCardData:res.data});}).catch(function(err){return console.log(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){// no need to use relative file path for '/api/recipes' with fetch. Fetch will auto find server.js in root dir\nPromise.all([this.getFeatured(),this.getLatest(),this.getMixItUp()]).then(this.setState({loadFooter:true}));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(source)source.cancel();}},{key:\"render\",value:function render(){var _this$state=this.state,error=_this$state.error,isFeatLoaded=_this$state.isFeatLoaded,isLatestLoaded=_this$state.isLatestLoaded;if(this.state.latestCardData.length<1||this.state.featCardData.length<1||this.state.randomCardData.length<1){return null;}else{var _this$state2=this.state,featCardData=_this$state2.featCardData,latestCardData=_this$state2.latestCardData,randomCardData=_this$state2.randomCardData;return/*#__PURE__*/ (// index and firstCardHeader propeties are used to conditionally render the featured and latest headers inside the first BrowseCard component. \n// this is because the headers must be rendered inside the first BrowseCard components in order for the headers to have the same behaviour as the grid cards. Oulined by the css grid attributes.\n_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"index-grid\",children:featCardData.map(function(cardData,index){return/*#__PURE__*/_jsx(BrowseCard,{img:cardData.img,description:cardData.description,author:cardData.authid.name,aId:cardData.authid._id,rtitle:cardData.title,index:index,edit:false,firstCardHeader:\"Featured\"},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"index-grid\",children:latestCardData.map(function(cardData,index){return/*#__PURE__*/_jsx(BrowseCard,{img:cardData.img,description:cardData.description,author:cardData.authid.name,aId:cardData.authid._id,rtitle:cardData.title,index:index,edit:false,firstCardHeader:\"Most Recent\"},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"index-grid\",children:randomCardData.map(function(cardData,index){return/*#__PURE__*/_jsx(BrowseCard,{img:cardData.img,description:cardData.description,author:cardData.authid.name,aId:cardData.authid._id,rtitle:cardData.title,index:index,edit:false,firstCardHeader:\"Mix It Up\"},index);})}),/*#__PURE__*/_jsx(Footer,{isLoaded:this.state.loadFooter})]}));}}}]);return Featured;}(Component);export default Featured;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/featured.jsx"],"names":["React","Component","Link","BrowseCard","Footer","axios","source","Featured","props","state","featCardData","latestCardData","randomCardData","loadFooter","CancelToken","getFeatured","bind","getLatest","getMixItUp","get","cancelToken","token","then","res","console","log","data","setState","catch","err","Promise","all","cancel","error","isFeatLoaded","isLatestLoaded","length","map","cardData","index","img","description","authid","name","_id","title"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport BrowseCard from '../components/browseCard';\nimport './featured.sass';\nimport Footer from '../components/footer';\nimport axios from 'axios';\nlet source;\n\n// featured titles need to be added inside the browseCard on the first of the line\n\nclass Featured extends Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tfeatCardData: [],\n\t\t\tlatestCardData: [],\n\t\t\trandomCardData: [],\n\t\t\tloadFooter: false\n\t\t}\n\t\tsource = axios.CancelToken.source();\n\t\tthis.getFeatured = this.getFeatured.bind(this);\n\t\tthis.getLatest = this.getLatest.bind(this);\n\t\tthis.getMixItUp = this.getMixItUp.bind(this);\n\t}\n\n\tgetFeatured() {\n\t\taxios.get(\"/api/recipes/getfeatured/\", {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\tconsole.log('featured', res.data);\n\t\t\t\tthis.setState({featCardData: res.data});\n\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\t}\n\n\tgetLatest() {\n\t\taxios.get(\"/api/recipes/getrecent/\", {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\tconsole.log('recent', res.data);\n\t\t\t\tthis.setState({latestCardData: res.data});\n\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\t}\n\n\tgetMixItUp() {\n\t\taxios.get(\"/api/recipes/getrandom/\", {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\tconsole.log('random', res.data);\n\t\t\t\tthis.setState({randomCardData: res.data});\n\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\t}\n\n\tcomponentDidMount() {\n\t\t// no need to use relative file path for '/api/recipes' with fetch. Fetch will auto find server.js in root dir\n\t\tPromise.all([this.getFeatured(), this.getLatest(), this.getMixItUp()])\n\t\t\t.then(this.setState({loadFooter: true}));\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (source) source.cancel();\n\t}\n\n\n\n\n\trender() {\n\t\tconst { error, isFeatLoaded, isLatestLoaded } = this.state;\n\t\n\n\t\tif ( this.state.latestCardData.length < 1 || this.state.featCardData.length < 1 ||  this.state.randomCardData.length < 1) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst { featCardData, latestCardData, randomCardData } = this.state;\n\n\t\t\treturn (\n\t\t\t\t// index and firstCardHeader propeties are used to conditionally render the featured and latest headers inside the first BrowseCard component. \n\t\t\t\t// this is because the headers must be rendered inside the first BrowseCard components in order for the headers to have the same behaviour as the grid cards. Oulined by the css grid attributes.\n\t\t\t\t<React.Fragment>\n\n\t\t\t\t\t<div className='index-grid'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfeatCardData.map((cardData, index) => \n\t\t\t\t\t\t\t\t<BrowseCard \n\t\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\t\timg={cardData.img} \n\t\t\t\t\t\t\t\t\tdescription={cardData.description} \n\t\t\t\t\t\t\t\t\tauthor={cardData.authid.name} \n\t\t\t\t\t\t\t\t\taId={cardData.authid._id} \n\t\t\t\t\t\t\t\t\trtitle={cardData.title} \n\t\t\t\t\t\t\t\t\tindex={index} \n\t\t\t\t\t\t\t\t\tedit={false}\n\t\t\t\t\t\t\t\t\tfirstCardHeader='Featured' \n\t\t\t\t\t\t\t\t/>\t\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='index-grid'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatestCardData.map((cardData, index) => \n\t\t\t\t\t\t\t\t<BrowseCard \n\t\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\t\timg={cardData.img} \n\t\t\t\t\t\t\t\t\tdescription={cardData.description} \n\t\t\t\t\t\t\t\t\tauthor={cardData.authid.name} \n\t\t\t\t\t\t\t\t\taId={cardData.authid._id} \n\t\t\t\t\t\t\t\t\trtitle={cardData.title} \n\t\t\t\t\t\t\t\t\tindex={index} \n\t\t\t\t\t\t\t\t\tedit={false}\n\t\t\t\t\t\t\t\t\tfirstCardHeader='Most Recent' \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='index-grid'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trandomCardData.map((cardData, index) => \n\t\t\t\t\t\t\t\t<BrowseCard \n\t\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\t\timg={cardData.img} \n\t\t\t\t\t\t\t\t\tdescription={cardData.description} \n\t\t\t\t\t\t\t\t\tauthor={cardData.authid.name} \n\t\t\t\t\t\t\t\t\taId={cardData.authid._id} \n\t\t\t\t\t\t\t\t\trtitle={cardData.title} \n\t\t\t\t\t\t\t\t\tindex={index} \n\t\t\t\t\t\t\t\t\tedit={false}\n\t\t\t\t\t\t\t\t\tfirstCardHeader='Mix It Up' \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Footer isLoaded={this.state.loadFooter} />\n\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\n\n\n\n\n\n\nexport default Featured;"]},"metadata":{},"sourceType":"module"}