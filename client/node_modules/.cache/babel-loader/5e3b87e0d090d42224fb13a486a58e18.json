{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/Documents/cookwell-react-express/client/src/pages/search-page.jsx\";\nimport React, { Component } from \"react\";\nimport './search-page.sass';\nimport DropMenu from '../components/dropMenu';\nimport MultiSelectMenu from '../components/multiSelectMenu';\nimport { mealTypes, dietOptions, cuisine } from '../searchOptions';\nimport ShowResults from '../components/show-results';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet source;\n\nclass Searchpage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchResult: [],\n      diet: [],\n      cuisine: [],\n      mealType: [],\n      time: null,\n      isLoaded: false\n    };\n    source = axios.CancelToken.source();\n    this.handleInput = this.handleInput.bind(this);\n    this.renderResults = this.renderResults.bind(this);\n  }\n\n  componentDidMount() {\n    // this is only such that on reload / refresh, the component will still load some results\n    let searchText = '';\n    if (this.props.searchText) searchText = this.props.searchText;\n    let body = {\n      diet: this.state.diet,\n      cuisine: this.state.cuisine,\n      mealType: this.state.mealType,\n      time: this.state.time,\n      searchText: searchText\n    };\n    axios.post(\"/api/recipes/search\", body, {\n      cancelToken: source.token\n    }).then(res => {\n      this.setState({\n        searchResult: res.data,\n        isLoaded: true\n      });\n    }).catch(err => console.log(err));\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.searchClick !== prevProps.searchClick || this.state.diet !== prevState.diet || this.state.time !== prevState.time || this.state.mealType !== prevState.mealType || this.state.cuisine !== prevState.cuisine) {\n      let body2 = {\n        diet: this.state.diet,\n        cuisine: this.state.cuisine,\n        mealType: this.state.mealType,\n        time: this.state.time,\n        searchText: this.props.searchText\n      };\n      axios.post(\"/api/recipes/search\", body2, {\n        cancelToken: source.token\n      }).then(res => {\n        this.setState({\n          searchResult: res.data,\n          isLoaded: true\n        });\n      }).catch(err => console.log(err));\n    }\n  }\n\n  handleInput(stateName, value) {\n    // if time selection\n    if (stateName == 'time') {\n      if (this.state.time === value) {\n        this.setState({\n          [stateName]: null\n        });\n      } else {\n        this.setState({\n          [stateName]: value\n        });\n      }\n\n      return;\n    } // if diet, mealType, or cuisine selection. Check if selection exists in state.diet array. If aleady exists, remove it. If it doesnt, append it to the state.diet\n\n\n    if (stateName == 'diet') {\n      var newState = this.state.diet;\n      var cont = 1;\n    } else if (stateName == 'cuisine') {\n      var newState = this.state.cuisine;\n      var cont = 1;\n    } else if (stateName == 'mealType') {\n      var newState = this.state.mealType;\n      var cont = 1;\n    }\n\n    if (cont) {\n      if (newState.includes(value)) {\n        const index = newState.indexOf(value);\n        newState.splice(index, 1);\n      } else {\n        newState.push(value);\n      }\n\n      this.setState({\n        [stateName]: newState\n      });\n    } // if searchText\n\n\n    if (stateName == 'searchText') {\n      this.setState({\n        [stateName]: value\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (source) source.cancel();\n  }\n\n  renderResults() {\n    if (this.state.isLoaded) {\n      if (this.state.searchResult.length > 0) {\n        return /*#__PURE__*/_jsxDEV(ShowResults, {\n          results: this.state.searchResult\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 12\n        }, this);\n      }\n\n      if (this.state.searchResult.length == 0) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"noResultsMsg\",\n          children: \"No results! Try another search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 12\n        }, this);\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"filter-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"restrictions-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label\",\n              children: \"Dietary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(MultiSelectMenu, {\n              name: \"diet\",\n              options: dietOptions,\n              state: this.state.diet,\n              handleInput: e => this.handleInput(e.target.name, e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label\",\n              children: \"Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"check-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"lt-sym\",\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 9\n              }, this), \" 30 min\", /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"time\",\n                value: \"30\",\n                type: \"checkbox\",\n                checked: this.state.time === \"30\",\n                onChange: e => this.handleInput(e.target.name, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"check-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"lt-sym\",\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 9\n              }, this), \" 45 min\", /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"time\",\n                value: \"45\",\n                type: \"checkbox\",\n                checked: this.state.time === \"45\",\n                onChange: e => this.handleInput(e.target.name, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"check-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"lt-sym\",\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 9\n              }, this), \" 60 min\", /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"time\",\n                value: \"60\",\n                type: \"checkbox\",\n                checked: this.state.time === \"60\",\n                onChange: e => this.handleInput(e.target.name, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label dropMenu-label\",\n              children: \"Culinary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(DropMenu, {\n              name: \"cuisine\",\n              options: cuisine,\n              handleInput: e => this.handleInput(e.target.name, e.target.value),\n              state: this.state.cuisine\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label dropMenu-label\",\n              children: \"Meal Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(DropMenu, {\n              name: \"mealType\",\n              options: mealTypes,\n              handleInput: e => this.handleInput(e.target.name, e.target.value),\n              state: this.state.mealType\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }, this), this.renderResults()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Searchpage;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/search-page.jsx"],"names":["React","Component","DropMenu","MultiSelectMenu","mealTypes","dietOptions","cuisine","ShowResults","axios","source","Searchpage","constructor","props","state","searchResult","diet","mealType","time","isLoaded","CancelToken","handleInput","bind","renderResults","componentDidMount","searchText","body","post","cancelToken","token","then","res","setState","data","catch","err","console","log","componentDidUpdate","prevProps","prevState","searchClick","body2","stateName","value","newState","cont","includes","index","indexOf","splice","push","componentWillUnmount","cancel","length","render","e","target","name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport './search-page.sass';\nimport DropMenu from '../components/dropMenu';\nimport MultiSelectMenu from '../components/multiSelectMenu';\nimport { mealTypes, dietOptions, cuisine } from '../searchOptions';\nimport ShowResults from '../components/show-results'\nimport axios from 'axios';\nlet source;\n\nclass Searchpage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsearchResult: [],\n\t\t\tdiet: [],\n\t\t\tcuisine: [],\n\t\t\tmealType: [],\n\t\t\ttime: null,\n\t\t\tisLoaded: false\n\t\t}\n\t\tsource = axios.CancelToken.source();\n\t\tthis.handleInput = this.handleInput.bind(this);\n\t\tthis.renderResults = this.renderResults.bind(this);\n\t}\n\n\n\tcomponentDidMount() {\n\t\t// this is only such that on reload / refresh, the component will still load some results\n\t\tlet searchText = '';\n\t\tif (this.props.searchText) searchText = this.props.searchText;\n\t\t\n\t\tlet body = {\n\t\t\tdiet: this.state.diet,\n\t       \tcuisine: this.state.cuisine,\n\t       \tmealType: this.state.mealType,\n\t       \ttime: this.state.time,\n\t       \tsearchText: searchText\n\t\t};\n\n\t\taxios.post(\"/api/recipes/search\", body, {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tsearchResult: res.data,\n\t\t\t\t\tisLoaded: true\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (\n\t\t\tthis.props.searchClick !== prevProps.searchClick || \n\t\t\tthis.state.diet !== prevState.diet || \n\t\t\tthis.state.time !== prevState.time ||  \n\t\t\tthis.state.mealType !== prevState.mealType || \n\t\t\tthis.state.cuisine !== prevState.cuisine ) {\t\n\n\t\t\tlet body2 = {\n\t\t\t\tdiet: this.state.diet,\n\t\t       \tcuisine: this.state.cuisine,\n\t\t       \tmealType: this.state.mealType,\n\t\t       \ttime: this.state.time,\n\t\t       \tsearchText: this.props.searchText\n\t\t\t};\n\n\t\t\taxios.post(\"/api/recipes/search\", body2, {cancelToken: source.token})\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tsearchResult: res.data,\n\t\t\t\t\t\tisLoaded: true\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.catch(err => console.log(err));\n\t\t}\n\t}\n\n\n\thandleInput(stateName, value) {\n\n\t\t// if time selection\n\t\tif (stateName == 'time') {\n\t\t\tif (this.state.time === value) {\n\t\t\t\tthis.setState({\n\t\t\t\t\t[stateName]: null\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\t[stateName]: value\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// if diet, mealType, or cuisine selection. Check if selection exists in state.diet array. If aleady exists, remove it. If it doesnt, append it to the state.diet\n\t\tif (stateName == 'diet') {\n\t\t\tvar newState = this.state.diet;\n\t\t\tvar cont = 1;\n\t\t} else if (stateName == 'cuisine') {\n\t\t\tvar newState = this.state.cuisine;\n\t\t\tvar cont = 1;\n\t\t} else if (stateName == 'mealType') {\n\t\t\tvar newState = this.state.mealType;\n\t\t\tvar cont = 1;\n\t\t}\n\t\tif (cont) {\n\t\t\tif (newState.includes(value)) {\n\t\t\t\tconst index = newState.indexOf(value);\n\t\t\t\tnewState.splice(index, 1);\n\t\t\t} else {\n\t\t\t\tnewState.push(value);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\t[stateName]: newState\n\t\t\t});\n\t\t}\n\n\n\t\t// if searchText\n\t\tif (stateName == 'searchText') {\n\t\t\tthis.setState({\n\t\t\t\t[stateName]: value\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\t\n\tcomponentWillUnmount() {\n\t\tif (source) source.cancel();\n\t}\n\n\n\trenderResults() {\n\t\tif (this.state.isLoaded) {\n\t\t\tif (this.state.searchResult.length > 0) {\n\t\t\t\treturn <ShowResults results={this.state.searchResult} />\n\t\t\t} \n\t\t\tif (this.state.searchResult.length == 0) {\n\t\t\t\treturn <div id='noResultsMsg'>No results! Try another search</div>\n\t\t\t}\n\t\t}\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div id=\"filter-container\"> \n\t\t\t\t\t<div id=\"restrictions-body\">\n\n\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t\t\t\t<span className='restriction-label'>Dietary</span>\n\t\t\t\t\t\t\t<MultiSelectMenu \n\t\t\t\t\t\t\t\tname='diet'\n\t\t\t\t\t\t\t\toptions={dietOptions}\n\t\t\t\t\t\t\t\tstate={this.state.diet}\n\t\t\t\t\t\t\t\thandleInput={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t \t\t\t<span className='restriction-label'>Time</span>\n\t\t\t\t\t\t\t<label className=\"check-container\"> \n\t\t\t\t\t\t\t\t<span className='lt-sym'>&lt;</span> 30 min\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tname=\"time\" \n\t\t\t\t\t\t\t\t\tvalue='30' \n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tchecked={this.state.time === \"30\"} \n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<label className=\"check-container\"> \n\t\t\t\t\t\t\t\t<span className='lt-sym'>&lt;</span> 45 min\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tname=\"time\" \n\t\t\t\t\t\t\t\t\tvalue=\"45\" \n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tchecked={this.state.time === \"45\"}\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)} \n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<label className=\"check-container\"> \n\t\t\t\t\t\t\t\t<span className='lt-sym'>&lt;</span> 60 min\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tname=\"time\" \n\t\t\t\t\t\t\t\t\tvalue=\"60\" \n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tchecked={this.state.time === \"60\"} \n\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\n\t\t\t\t\t\t\t</label> \n\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t\t\t\t<span className='restriction-label dropMenu-label'>Culinary</span>\n\t\t\t\t\t\t\t<DropMenu \n\t\t\t\t\t\t\t\tname='cuisine'\n\t\t\t\t\t\t\t\toptions={cuisine} \n\t\t\t\t\t\t\t\thandleInput = {(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tstate={this.state.cuisine}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t\t\t\t<span className='restriction-label dropMenu-label'>Meal Type</span>\n\t\t\t\t\t\t\t<DropMenu \n\t\t\t\t\t\t\t\tname='mealType'\n\t\t\t\t\t\t\t\toptions={mealTypes} \n\t\t\t\t\t\t\t\thandleInput = {(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\tstate={this.state.mealType}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n\t\t\t\t{\tthis.renderResults()\t}\n\t\t\t\t\n\t\t\t\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\n\n\n\n\n\n\n\nexport default Searchpage;\n\n\n\n"]},"metadata":{},"sourceType":"module"}