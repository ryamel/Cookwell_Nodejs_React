{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/Documents/cookwell-react-express/client/src/pages/search-page.jsx\";\nimport React, { Component } from \"react\";\nimport './search-page.sass';\nimport DropMenu from '../components/dropMenu';\nimport MultiSelectMenu from '../components/multiSelectMenu';\nimport { mealTypes, dietOptions, cuisine } from '../searchOptions';\nimport ShowResults from './show-results';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Searchpage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: false,\n      results: [],\n      isLoaded: false,\n      error: false,\n      searchText: '',\n      diet: [],\n      cuisine: [],\n      mealType: [],\n      time: null\n    };\n    this.searchFunction = this.searchFunction.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.getParameterByName = this.getParameterByName.bind(this);\n  }\n\n  componentDidMount() {\n    // inital keyword search\n    let keywords = this.getParameterByName('keywords');\n    console.log(keywords);\n    let data = JSON.stringify({\n      search: keywords\n    });\n    axios.post('/api/recipes/search-component-mount', data, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      this.setState({\n        results: res.data,\n        isLoaded: true\n      });\n    }).catch(err => {\n      console.log(err.response.data);\n    }); // set search feild\n\n    this.setState({\n      searchText: keywords\n    });\n  }\n\n  searchFunction(input) {\n    const data = {\n      diet: this.state.diet,\n      cuisine: this.state.cuisine,\n      mealType: this.state.mealType,\n      time: this.state.time,\n      searchText: this.state.searchText\n    };\n    const postOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    };\n    fetch(\"/api/recipes/search/0\", postOptions).then(res => res.json()).then(data => {\n      console.log(data);\n      this.setState({\n        results: data,\n        isLoaded: true,\n        error: false\n      });\n    }, error => {\n      console.log('error');\n      this.setState({\n        isLoaded: false,\n        error: error\n      });\n    });\n  }\n\n  getParameterByName(name, url = window.location.href) {\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n  }\n\n  handleInput(stateName, value) {\n    // if time selection\n    if (stateName == 'time') {\n      if (this.state.time === value) {\n        this.setState({\n          [stateName]: null\n        }, console.log(this.state.time));\n      } else {\n        this.setState({\n          [stateName]: value\n        }, console.log(this.state.time));\n      }\n\n      return;\n    } // if diet, mealType, or cuisine selection. Check if selection exists in state.diet array. If aleady exists, remove it. If it doesnt, append it to the state.diet\n\n\n    if (stateName == 'diet') {\n      var newState = this.state.diet;\n      var cont = 1;\n    } else if (stateName == 'cuisine') {\n      var newState = this.state.cuisine;\n      var cont = 1;\n    } else if (stateName == 'mealType') {\n      var newState = this.state.mealType;\n      var cont = 1;\n    }\n\n    if (cont) {\n      if (newState.includes(value)) {\n        const index = newState.indexOf(value);\n        newState.splice(index, 1);\n      } else {\n        newState.push(value);\n      }\n\n      this.setState({\n        [stateName]: newState\n      }, console.log(this.state));\n    } // if searchText\n\n\n    if (stateName == 'searchText') {\n      this.setState({\n        [stateName]: value\n      }, console.log(this.state.searchText));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"filter-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"filterSearchContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Keywords\",\n            type: \"text\",\n            name: \"searchText\",\n            value: this.state.searchText,\n            onChange: e => this.handleInput(e.target.name, e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.searchFunction,\n            className: \"searchBtn\",\n            type: \"submit\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"restrictions-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label\",\n              children: \"Dietary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(MultiSelectMenu, {\n              name: \"diet\",\n              options: dietOptions,\n              state: this.state.diet,\n              handleInput: e => this.handleInput(e.target.name, e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label\",\n              children: \"Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"check-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"lt-sym\",\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 10\n              }, this), \" 30 min\", /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"time\",\n                value: \"30\",\n                type: \"checkbox\",\n                checked: this.state.time === \"30\",\n                onChange: e => this.handleInput(e.target.name, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"check-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"lt-sym\",\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 10\n              }, this), \" 45 min\", /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"time\",\n                value: \"45\",\n                type: \"checkbox\",\n                checked: this.state.time === \"45\",\n                onChange: e => this.handleInput(e.target.name, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"check-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"lt-sym\",\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 10\n              }, this), \" 60 min\", /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"time\",\n                value: \"60\",\n                type: \"checkbox\",\n                checked: this.state.time === \"60\",\n                onChange: e => this.handleInput(e.target.name, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"checkmark\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label dropMenu-label\",\n              children: \"Culinary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(DropMenu, {\n              name: \"cuisine\",\n              options: cuisine,\n              handleInput: e => this.handleInput(e.target.name, e.target.value),\n              state: this.state.cuisine\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filterDivs\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"restriction-label dropMenu-label\",\n              children: \"Meal Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(DropMenu, {\n              name: \"mealType\",\n              options: mealTypes,\n              handleInput: e => this.handleInput(e.target.name, e.target.value),\n              state: this.state.mealType\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ShowResults, {\n        isLoaded: this.state.isLoaded,\n        error: this.state.error,\n        results: this.state.results\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Searchpage;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/search-page.jsx"],"names":["React","Component","DropMenu","MultiSelectMenu","mealTypes","dietOptions","cuisine","ShowResults","axios","Searchpage","constructor","props","state","show","results","isLoaded","error","searchText","diet","mealType","time","searchFunction","bind","handleInput","getParameterByName","componentDidMount","keywords","console","log","data","JSON","stringify","search","post","headers","then","res","setState","catch","err","response","input","postOptions","method","body","fetch","json","name","url","window","location","href","replace","regex","RegExp","exec","decodeURIComponent","stateName","value","newState","cont","includes","index","indexOf","splice","push","render","e","target"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport './search-page.sass';\nimport DropMenu from '../components/dropMenu';\nimport MultiSelectMenu from '../components/multiSelectMenu';\nimport { mealTypes, dietOptions, cuisine } from '../searchOptions';\nimport ShowResults from './show-results'\nimport axios from 'axios';\n\nclass Searchpage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshow: false,\n\t\t\tresults: [],\n\t\t\tisLoaded: false,\n\t\t\terror: false,\n\t\t\tsearchText: '',\n\t\t\tdiet: [],\n\t\t\tcuisine: [],\n\t\t\tmealType: [],\n\t\t\ttime: null\n\t\t}\n\t\tthis.searchFunction = this.searchFunction.bind(this);\n\t\tthis.handleInput = this.handleInput.bind(this);\n\t\tthis.getParameterByName = this.getParameterByName.bind(this);\n\t}\n\n\n\tcomponentDidMount() {\n\t\t// inital keyword search\n\t\tlet keywords = this.getParameterByName('keywords');\n\t\tconsole.log(keywords);\n\t\tlet data = JSON.stringify({search: keywords});\n\t\taxios.post('/api/recipes/search-component-mount', data, { headers: { 'Content-Type': 'application/json' } })\n\t\t.then(res => {\n\t\t\tthis.setState({\n\t\t\t\tresults: res.data,\n\t\t\t\tisLoaded: true\n\t\t\t})\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log(err.response.data);\n\t\t});\n\n\t\t// set search feild\n\t\tthis.setState({searchText: keywords});\n\t}\n\n\tsearchFunction(input) {\n\n\t\tconst data = {\n\t\t\tdiet: this.state.diet,\n\t       \tcuisine: this.state.cuisine,\n\t       \tmealType: this.state.mealType,\n\t       \ttime: this.state.time,\n\t       \tsearchText: this.state.searchText\n\t\t};\n\n\t\tconst postOptions = {\n\t        method: 'POST',\n\t        headers: { 'Content-Type': 'application/json' },\n\t        body: JSON.stringify(data)\n\t    };\n\n\t    \t   \n\t\tfetch(\"/api/recipes/search/0\", postOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(\n\t\t\t\t(data) => {\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tresults: data,\n\t\t\t\t\t\tisLoaded: true,\n\t\t\t\t\t\terror: false\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tconsole.log('error');\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tisLoaded: false,\n\t\t\t\t\t\terror: error\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t)\n\t}\n\n\n\tgetParameterByName(name, url = window.location.href) {\n\t    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n\t    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n\t        results = regex.exec(url);\n\t    if (!results) return null;\n\t    if (!results[2]) return '';\n\t    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n\t}\n\n\n\thandleInput(stateName, value) {\n\n\t\t// if time selection\n\t\tif (stateName == 'time') {\n\t\t\tif (this.state.time === value) {\n\t\t\t\tthis.setState({\n\t\t\t\t\t[stateName]: null\n\t\t\t\t},console.log(this.state.time));\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\t[stateName]: value\n\t\t\t\t},console.log(this.state.time));\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\n\t\t// if diet, mealType, or cuisine selection. Check if selection exists in state.diet array. If aleady exists, remove it. If it doesnt, append it to the state.diet\n\t\tif (stateName == 'diet') {\n\t\t\tvar newState = this.state.diet;\n\t\t\tvar cont = 1;\n\t\t} else if (stateName == 'cuisine') {\n\t\t\tvar newState = this.state.cuisine;\n\t\t\tvar cont = 1;\n\t\t} else if (stateName == 'mealType') {\n\t\t\tvar newState = this.state.mealType;\n\t\t\tvar cont = 1;\n\t\t}\n\t\tif (cont) {\n\t\t\tif (newState.includes(value)) {\n\t\t\t\tconst index = newState.indexOf(value);\n\t\t\t\tnewState.splice(index, 1);\n\t\t\t} else {\n\t\t\t\tnewState.push(value);\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\t[stateName]: newState\n\t\t\t}, console.log(this.state));\n\t\t}\n\n\n\t\t// if searchText\n\t\tif (stateName == 'searchText') {\n\t\t\tthis.setState({\n\t\t\t\t[stateName]: value\n\t\t\t}, console.log(this.state.searchText));\n\t\t}\n\t\t\n\t}\n\n\n\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\n\t\t\t\t<div id=\"filter-container\"> \n\n\t\t\t\t\t\t<div id=\"filterSearchContainer\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tplaceholder=\"Keywords\" \n\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\tname=\"searchText\" \n\t\t\t\t\t\t\t\tvalue={this.state.searchText}\n\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button onClick={this.searchFunction} className=\"searchBtn\" type=\"submit\">Search</button>\n\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t<div id=\"restrictions-body\">\n\n\t\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t\t\t\t\t<span className='restriction-label'>Dietary</span>\n\t\t\t\t\t\t\t\t<MultiSelectMenu \n\t\t\t\t\t\t\t\t\tname='diet'\n\t\t\t\t\t\t\t\t\toptions={dietOptions}\n\t\t\t\t\t\t\t\t\tstate={this.state.diet}\n\t\t\t\t\t\t\t\t\thandleInput={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t\t \t\t\t<span className='restriction-label'>Time</span>\n\t\t\t\t\t\t\t\t<label className=\"check-container\"> \n\t\t\t\t\t\t\t\t\t<span className='lt-sym'>&lt;</span> 30 min\n\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\tname=\"time\" \n\t\t\t\t\t\t\t\t\t\tvalue='30' \n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.time === \"30\"} \n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<label className=\"check-container\"> \n\t\t\t\t\t\t\t\t\t<span className='lt-sym'>&lt;</span> 45 min\n\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\tname=\"time\" \n\t\t\t\t\t\t\t\t\t\tvalue=\"45\" \n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.time === \"45\"}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)} \n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<label className=\"check-container\"> \n\t\t\t\t\t\t\t\t\t<span className='lt-sym'>&lt;</span> 60 min\n\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\tname=\"time\" \n\t\t\t\t\t\t\t\t\t\tvalue=\"60\" \n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.time === \"60\"} \n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span className=\"checkmark\"></span>\n\t\t\t\t\t\t\t\t</label> \n\t\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t\t\t\t\t<span className='restriction-label dropMenu-label'>Culinary</span>\n\t\t\t\t\t\t\t\t<DropMenu \n\t\t\t\t\t\t\t\t\tname='cuisine'\n\t\t\t\t\t\t\t\t\toptions={cuisine} \n\t\t\t\t\t\t\t\t\thandleInput = {(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\tstate={this.state.cuisine}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t<div className=\"filterDivs\">\n\t\t\t\t\t\t\t\t<span className='restriction-label dropMenu-label'>Meal Type</span>\n\t\t\t\t\t\t\t\t<DropMenu \n\t\t\t\t\t\t\t\t\tname='mealType'\n\t\t\t\t\t\t\t\t\toptions={mealTypes} \n\t\t\t\t\t\t\t\t\thandleInput = {(e) => this.handleInput(e.target.name, e.target.value)}\n\t\t\t\t\t\t\t\t\tstate={this.state.mealType}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\n\n\n\t\t\t\t<ShowResults isLoaded={this.state.isLoaded} error={this.state.error} results={this.state.results} />\n\t\t\t\n\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\n\n\n\n\n\n\n\nexport default Searchpage;\n\n\n\n"]},"metadata":{},"sourceType":"module"}