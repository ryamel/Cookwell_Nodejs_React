{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/Documents/cookwell-react-express/client/src/pages/login-page.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useEffect, useState } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './login-page.sass';\nimport { withRouter } from \"react-router\";\nimport PropTypes from \"prop-types\"; // needed for HC withRouter\n\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet source;\n\nfunction Loginpage(props) {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [pwd, setPwd] = useState('');\n  const [msg, setMsg] = useState('');\n\n  function handleMsg(msg) {\n    if (msg.length > 0) {\n      const timer = setTimeout(() => {\n        setMsg(msg);\n      }, 5500);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logMsg\",\n        children: msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 11\n      }, this);\n    }\n  }\n\n  function login(email, pwd) {\n    source = axios.CancelToken.source();\n    const body = {\n      email: email,\n      password: pwd\n    };\n    console.log(source.token);\n    axios.post('/api/users/login', body, {\n      cancelToken: source.token\n    }).then(response => {\n      localStorage['logged_in'] = true;\n      props.login();\n      props.history.push('/'); // redirect using withRouter and prototypes import\n    }).catch(error => {\n      if (typeof error.response.data !== 'undefined') setMsg(error.response.data);\n    });\n  } // useEffect(() => {\n  // \tif (source) {\n  // \t\tconsole.log('cancel');\n  // \t\treturn () => source.cancel();\n  // \t}\n  // })\n\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loginContainer\",\n      children: [handleMsg(msg), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        placeholder: \"Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"hp\",\n        type: \"text\",\n        name: \"email_two\",\n        placeholder: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"Password\",\n        name: \"pwd\",\n        placeholder: \"Password\",\n        value: pwd,\n        onChange: e => setPwd(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => login(email, pwd),\n        id: \"logInBtn\",\n        type: \"submit\",\n        name: \"submit-loginPage\",\n        children: \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"forgotPwd\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgot-password\",\n          children: \"Forgot Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"signUp\",\n        children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup-page\",\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Loginpage, \"bSYpRVT06wCJpN21bEnsGsECEI0=\");\n\n_c = Loginpage;\nconst LoginpageWithRouter = withRouter(Loginpage);\n_c2 = LoginpageWithRouter;\nexport default LoginpageWithRouter; //export default Loginpage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Loginpage\");\n$RefreshReg$(_c2, \"LoginpageWithRouter\");","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/login-page.jsx"],"names":["React","Component","useEffect","useState","Link","withRouter","PropTypes","axios","source","Loginpage","props","email","setEmail","pwd","setPwd","msg","setMsg","handleMsg","length","timer","setTimeout","login","CancelToken","body","password","console","log","token","post","cancelToken","then","response","localStorage","history","push","catch","error","data","e","target","value","LoginpageWithRouter"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './login-page.sass';\nimport { withRouter } from \"react-router\";\nimport PropTypes from \"prop-types\"; // needed for HC withRouter\nimport axios from 'axios';\nlet source;\n\nfunction Loginpage(props) {\n\n\tconst [email, setEmail] = useState('');\n\tconst [pwd, setPwd] = useState('');\n\tconst [msg, setMsg] = useState('');\n\n\tfunction handleMsg(msg) {\n\t\tif (msg.length > 0) {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tsetMsg(msg);\n\t\t\t}, 5500);\n\t\t\treturn <div className='logMsg'>{msg}</div>;\n\t\t}\n\t}\n\n\tfunction login(email, pwd) {\n\t\tsource = axios.CancelToken.source();\n\t\tconst body = { email: email, password: pwd };\n\t\tconsole.log(source.token);\n\t\taxios.post('/api/users/login', body, {cancelToken: source.token} )\n\t\t\t.then(response => {\n\t\t\t\tlocalStorage['logged_in'] = true;\n\t\t\t\tprops.login();\n\t\t\t\tprops.history.push('/'); // redirect using withRouter and prototypes import\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (typeof error.response.data !== 'undefined') setMsg(error.response.data);\n\t\t\t})\n\t}\n\n\t// useEffect(() => {\n\t// \tif (source) {\n\t// \t\tconsole.log('cancel');\n\t// \t\treturn () => source.cancel();\n\t// \t}\n\t// })\n\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div className=\"loginContainer\">\n\t\t\t\t{ handleMsg(msg) }\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tname=\"email\" placeholder=\"Email\"\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={e => setEmail(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<input \n\t\t\t\t\tclassName=\"hp\" \n\t\t\t\t\ttype=\"text\" name=\"email_two\" placeholder=\"Email\"\n\t\t\t\t/>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"Password\" \n\t\t\t\t\tname=\"pwd\" \n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\tvalue={pwd}\n\t\t\t\t\tonChange={e => setPwd(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<button \n\t\t\t\t\tonClick={() => login(email, pwd)} \n\t\t\t\t\tid=\"logInBtn\" \n\t\t\t\t\ttype=\"submit\" \n\t\t\t\t\tname=\"submit-loginPage\">Log in\n\t\t\t\t</button>\n\t\t\t\t<div id=\"forgotPwd\">\n\t\t\t\t\t<Link to=\"/forgot-password\">Forgot Password</Link>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"signUp\">\n\t\t\t\t\tDon't have an account? <Link to=\"/signup-page\">Sign up</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n\n\nconst LoginpageWithRouter = withRouter(Loginpage);\n\n\nexport default LoginpageWithRouter;\n//export default Loginpage;\n"]},"metadata":{},"sourceType":"module"}