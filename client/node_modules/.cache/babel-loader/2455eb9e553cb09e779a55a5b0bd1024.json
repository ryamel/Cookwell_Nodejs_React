{"ast":null,"code":"import _classCallCheck from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from\"react-router-dom\";import'./reset-password.sass';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var source;// load url params\n// send params to route api\n// confirm valid on client\n// \nvar ResetPassword=/*#__PURE__*/function(_React$Component){_inherits(ResetPassword,_React$Component);var _super=_createSuper(ResetPassword);function ResetPassword(props){var _this;_classCallCheck(this,ResetPassword);_this=_super.call(this);_this.state={uid:'',token:'',msg:'',pwd:'',pwdRepeat:''};source=axios.CancelToken.source();_this.updatePwd=_this.updatePwd.bind(_assertThisInitialized(_this));_this.handleMsg=_this.handleMsg.bind(_assertThisInitialized(_this));_this.getParameterByName=_this.getParameterByName.bind(_assertThisInitialized(_this));return _this;}_createClass(ResetPassword,[{key:\"componentDidMount\",value:function componentDidMount(){var uid=this.getParameterByName('uid');var token=this.getParameterByName('token');if(uid&&token)this.setState({uid:uid,token:token});}},{key:\"getParameterByName\",value:function getParameterByName(name){var url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window.location.href;name=name.replace(/[\\[\\]]/g,'\\\\$&');var regex=new RegExp('[?&]'+name+'(=([^&#]*)|&|#|$)'),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\\+/g,' '));}},{key:\"handleMsg\",value:function handleMsg(msg){if(msg.length>0){return/*#__PURE__*/_jsx(\"div\",{className:\"logMsg\",children:msg});}}},{key:\"updatePwd\",value:function updatePwd(){var _this2=this;var body={uid:this.state.uid,token:this.state.token,pwd:this.state.pwd,pwdRepeat:this.state.pwdRepeat};axios.post('/api/mail/pwdresetupdate',body,{cancelToken:source.token}).then(function(res){_this2.setState({msg:res.data});}).catch(function(error){if(typeof error.res.data!=='undefined')_this2.setState({msg:error.res.data});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(source)source.cancel();}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"loginContainer\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"newPwdTitle\",children:\"Password Reset\"}),/*#__PURE__*/_jsx(\"div\",{id:\"pwdreset-msg\",children:\"Please enter your new password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pwd\",placeholder:\"Password\",value:this.state.pwd,onChange:function onChange(e){return _this3.setState({pwd:e.target.value});}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pwd-repeat\",placeholder:\"Repeat password\",value:this.state.pwdRepeat,onChange:function onChange(e){return _this3.setState({pwdRepeat:e.target.value});}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"reset-password-submit\",onClick:function onClick(){return _this3.updatePwd();},children:\"Submit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"logMsg\",children:this.state.msg})]});}}]);return ResetPassword;}(React.Component);export default ResetPassword;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/reset-password.jsx"],"names":["React","Component","Link","axios","source","ResetPassword","props","state","uid","token","msg","pwd","pwdRepeat","CancelToken","updatePwd","bind","handleMsg","getParameterByName","setState","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","length","body","post","cancelToken","then","res","data","catch","error","cancel","e","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './reset-password.sass';\nimport axios from 'axios';\nlet source;\n\n// load url params\n\n// send params to route api\n\n// confirm valid on client\n\n// \n\n\nclass ResetPassword extends React.Component {\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tuid: '',\n\t\t\ttoken: '',\n\t\t\tmsg: '',\n\t\t\tpwd: '',\n\t\t\tpwdRepeat: ''\n\t\t}\n\t\tsource = axios.CancelToken.source();\n\t\tthis.updatePwd = this.updatePwd.bind(this);\n\t\tthis.handleMsg = this.handleMsg.bind(this);\n\t\tthis.getParameterByName = this.getParameterByName.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tlet uid = this.getParameterByName('uid');\n\t\tlet token = this.getParameterByName('token');\n\t\tif (uid && token) this.setState({uid: uid, token: token});\n\t}\n\n\tgetParameterByName(name, url = window.location.href) {\n\t    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n\t    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n\t        results = regex.exec(url);\n\t    if (!results) return null;\n\t    if (!results[2]) return '';\n\t    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n\t}\n\n\n\thandleMsg(msg) {\n\t\tif (msg.length > 0) {\n\t\t\treturn <div className='logMsg'>{msg}</div>;\n\t\t}\n\t}\n\n\tupdatePwd() {\n\t\tconst body = ({\n\t\t\tuid: this.state.uid, \n\t\t\ttoken: this.state.token,\n\t\t\tpwd: this.state.pwd,\n\t\t\tpwdRepeat: this.state.pwdRepeat\n\t\t});\n\n\t\taxios.post('/api/mail/pwdresetupdate', body, {cancelToken: source.token})\n\t\t\t.then(res => {\n\t\t\t\tthis.setState({msg: res.data});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (typeof error.res.data !== 'undefined') this.setState({msg: error.res.data});\n\t\t\t})\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (source) source.cancel();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"loginContainer\">\n\t\t\t\t<div id=\"newPwdTitle\">Password Reset</div>\n\t\t\t\t<div id='pwdreset-msg'>Please enter your new password</div>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"password\" \n\t\t\t\t\tname=\"pwd\" \n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\tvalue={this.state.pwd}\n\t\t\t\t\tonChange={(e) => this.setState({pwd: e.target.value})}\n\t\t\t\t\t/>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"password\" \n\t\t\t\t\tname=\"pwd-repeat\" \n\t\t\t\t\tplaceholder=\"Repeat password\"\n\t\t\t\t\tvalue={this.state.pwdRepeat}\n\t\t\t\t\tonChange={(e) => this.setState({pwdRepeat: e.target.value})}\n\t\t\t\t\t/>\n\t\t\t\t<button type=\"submit\" name=\"reset-password-submit\" onClick={() => this.updatePwd()}>Submit</button>\n\t\t\t\t<div className='logMsg'>{this.state.msg}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n\nexport default ResetPassword;\n"]},"metadata":{},"sourceType":"module"}