{"ast":null,"code":"import _slicedToArray from\"/Users/ryan/Documents/cookwell-react-express/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component,useEffect,useState}from'react';import{Link}from\"react-router-dom\";import'./login-page.sass';import{withRouter}from\"react-router\";// needed for HC withRouter\nimport axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var source;function Loginpage(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pwd=_useState4[0],setPwd=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),msg=_useState6[0],setMsg=_useState6[1];function handleMsg(msg){if(msg.length>0){var timer=setTimeout(function(){setMsg(msg);},5500);return/*#__PURE__*/_jsx(\"div\",{className:\"logMsg\",children:msg});}}function login(email,pwd){source=axios.CancelToken.source();var body={email:email,password:pwd};axios.post('/api/users/login',body,{cancelToken:source.token}).then(function(response){localStorage['logged_in']=true;// used to prevent logout on refresh\nprops.login();props.history.push('/');// redirect using withRouter and prototypes import\n}).catch(function(error){if(typeof error.response.data!=='undefined')setMsg(error.response.data);});}useEffect(function(){if(source){console.log('cancel');return function(){return source.cancel();};}});return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginContainer\",children:[handleMsg(msg),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",placeholder:\"Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"hp\",type:\"text\",name:\"email_two\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"Password\",name:\"pwd\",placeholder:\"Password\",value:pwd,onChange:function onChange(e){return setPwd(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return login(email,pwd);},id:\"logInBtn\",type:\"submit\",name:\"submit-loginPage\",children:\"Log in\"}),/*#__PURE__*/_jsx(\"div\",{id:\"forgotPwd\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",children:\"Forgot Password\"})}),/*#__PURE__*/_jsxs(\"div\",{id:\"signUp\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup-page\",children:\"Sign up\"})]})]})});}var LoginpageWithRouter=withRouter(Loginpage);export default LoginpageWithRouter;//export default Loginpage;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/login-page.jsx"],"names":["React","Component","useEffect","useState","Link","withRouter","axios","source","Loginpage","props","email","setEmail","pwd","setPwd","msg","setMsg","handleMsg","length","timer","setTimeout","login","CancelToken","body","password","post","cancelToken","token","then","response","localStorage","history","push","catch","error","data","console","log","cancel","e","target","value","LoginpageWithRouter"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './login-page.sass';\nimport { withRouter } from \"react-router\";\nimport PropTypes from \"prop-types\"; // needed for HC withRouter\nimport axios from 'axios';\nlet source;\n\nfunction Loginpage(props) {\n\n\tconst [email, setEmail] = useState('');\n\tconst [pwd, setPwd] = useState('');\n\tconst [msg, setMsg] = useState('');\n\n\tfunction handleMsg(msg) {\n\t\tif (msg.length > 0) {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tsetMsg(msg);\n\t\t\t}, 5500);\n\t\t\treturn <div className='logMsg'>{msg}</div>;\n\t\t}\n\t}\n\n\tfunction login(email, pwd) {\n\t\tsource = axios.CancelToken.source();\n\t\tconst body = { email: email, password: pwd };\n\n\t\taxios.post('/api/users/login', body, {cancelToken: source.token} )\n\t\t\t.then(response => {\n\t\t\t\tlocalStorage['logged_in'] = true; // used to prevent logout on refresh\n\t\t\t\tprops.login();\n\t\t\t\tprops.history.push('/'); // redirect using withRouter and prototypes import\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (typeof error.response.data !== 'undefined') setMsg(error.response.data);\n\t\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\tif (source) {\n\t\t\tconsole.log('cancel');\n\t\t\treturn () => source.cancel();\n\t\t}\n\t})\n\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div className=\"loginContainer\">\n\t\t\t\t{ handleMsg(msg) }\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tname=\"email\" placeholder=\"Email\"\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={e => setEmail(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<input \n\t\t\t\t\tclassName=\"hp\" \n\t\t\t\t\ttype=\"text\" name=\"email_two\" placeholder=\"Email\"\n\t\t\t\t/>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"Password\" \n\t\t\t\t\tname=\"pwd\" \n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\tvalue={pwd}\n\t\t\t\t\tonChange={e => setPwd(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<button \n\t\t\t\t\tonClick={() => login(email, pwd)} \n\t\t\t\t\tid=\"logInBtn\" \n\t\t\t\t\ttype=\"submit\" \n\t\t\t\t\tname=\"submit-loginPage\">Log in\n\t\t\t\t</button>\n\t\t\t\t<div id=\"forgotPwd\">\n\t\t\t\t\t<Link to=\"/forgot-password\">Forgot Password</Link>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"signUp\">\n\t\t\t\t\tDon't have an account? <Link to=\"/signup-page\">Sign up</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n\n\nconst LoginpageWithRouter = withRouter(Loginpage);\n\n\nexport default LoginpageWithRouter;\n//export default Loginpage;\n"]},"metadata":{},"sourceType":"module"}