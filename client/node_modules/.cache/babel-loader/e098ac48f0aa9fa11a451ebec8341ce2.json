{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/Documents/cookwell-react-express/client/src/pages/recipes.jsx\";\nimport React, { Component } from \"react\";\nimport BrowseCard from '../components/browseCard';\nimport './recipes.sass';\nimport Footer from '../components/footer';\nimport axios from 'axios'; // added task. Pagination using random recipes.\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Recipes extends Component {\n  constructor() {\n    super();\n    this.state = {\n      cardData: [],\n      isLoaded: false,\n      loadFooter: false,\n      atBottom: false\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n    this.isBottom = this.isBottom.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('scroll', this.handleScroll);\n    axios.get(\"/api/recipes/\").then(res => {\n      this.setState({\n        cardData: res.data,\n        isLoaded: true,\n        loadFooter: true\n      });\n    });\n  } // handleScroll(e) {\n  // \t// console.log('hei');\n  // \t// let element = e.target\n  //  //    if (element.scrollHeight - element.scrollTop === element.clientHeight) {\n  //  //    \tconsole.log('BOTTOM!');\n  //  //    }\n  // \tconsole.log('trig');\n  // \tlet scrollTop = e.srcElement.body.scrollTop,\n  // \t    itemTranslate = Math.min(0, scrollTop/3 - 60);\n  // \t    console.log(e);\n  // \t// this.setState({\n  // \t// \ttransform: itemTranslate\n  // \t// });\n  // }\n\n\n  handleScroll(event) {\n    console.log(\"scrolled\");\n    const element = document.getElementById('browse-body');\n\n    if (!this.state.atBottom && this.isBottom(element)) {\n      this.setState({\n        atBottom: true\n      });\n      alert(\"bottom reached\");\n    }\n\n    if (!this.isBottom(element)) {\n      this.setState({\n        atBottom: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.handleScroll);\n  }\n\n  isBottom(element) {\n    return element.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n\n  render() {\n    const {\n      isLoaded\n    } = this.state;\n\n    if (!isLoaded) {\n      return null;\n    } else {\n      const {\n        cardData\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"browse-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recipe-grid-container\",\n          children: cardData.map((cardData, index) => /*#__PURE__*/_jsxDEV(BrowseCard, {\n            img: cardData.img,\n            description: cardData.description,\n            author: cardData.authorName,\n            rtitle: cardData.title\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 8\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {\n          isLoaded: this.state.loadFooter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }, this);\n    }\n  }\n\n}\n\nexport default Recipes;","map":{"version":3,"sources":["/Users/ryan/Documents/cookwell-react-express/client/src/pages/recipes.jsx"],"names":["React","Component","BrowseCard","Footer","axios","Recipes","constructor","state","cardData","isLoaded","loadFooter","atBottom","handleScroll","bind","isBottom","componentDidMount","document","addEventListener","get","then","res","setState","data","event","console","log","element","getElementById","alert","componentWillUnmount","removeEventListener","getBoundingClientRect","bottom","window","innerHeight","render","map","index","img","description","authorName","title"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport BrowseCard from '../components/browseCard';\nimport './recipes.sass';\nimport Footer from '../components/footer';\nimport axios from 'axios';\n\n// added task. Pagination using random recipes.\n\n\nclass Recipes extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tcardData: [],\n\t\t\tisLoaded: false,\n\t\t\tloadFooter: false,\n\t\t\tatBottom: false\n\t\t}\n\t\tthis.handleScroll = this.handleScroll.bind(this);\n\t\tthis.isBottom = this.isBottom.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener('scroll', this.handleScroll);\n\n\t\taxios.get(\"/api/recipes/\")\n\t\t\t.then(res => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcardData: res.data,\n\t\t\t\t\t\tisLoaded: true,\n\t\t\t\t\t\tloadFooter: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t)\n\t}\n\n\t// handleScroll(e) {\n\t// \t// console.log('hei');\n\t// \t// let element = e.target\n\t//  //    if (element.scrollHeight - element.scrollTop === element.clientHeight) {\n\t//  //    \tconsole.log('BOTTOM!');\n\t//  //    }\n\t// \tconsole.log('trig');\n\t// \tlet scrollTop = e.srcElement.body.scrollTop,\n\t// \t    itemTranslate = Math.min(0, scrollTop/3 - 60);\n\t// \t    console.log(e);\n\t// \t// this.setState({\n\t// \t// \ttransform: itemTranslate\n\t// \t// });\n\t\n\t\n\t// }\n\n\thandleScroll(event) {\n\t\tconsole.log(\"scrolled\");\n\t\tconst element = document.getElementById('browse-body');\n\t\tif (!this.state.atBottom && this.isBottom(element)) {\n\t\t\tthis.setState({atBottom: true});\n\t\t\talert(\"bottom reached\");\n\t\t}\n\t\tif (!this.isBottom(element)) {\n\t\t\tthis.setState({atBottom: false});\n\t\t}\n\t}\n\n\n\n\tcomponentWillUnmount() {\n\t    document.removeEventListener('scroll', this.handleScroll);\n\t}\n\n\tisBottom(element) {\n\t\treturn element.getBoundingClientRect().bottom <= window.innerHeight;\n\t}\n\n\n\trender() {\n\t\tconst {isLoaded } = this.state;\n\n\n\t\tif (!isLoaded) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst { cardData } = this.state;\n\t\t\treturn (\n\t\t\t\t<div className='browse-body'>\n\t\t\t\t\t<div className='recipe-grid-container'>\n\t\t\t\t\t\t{cardData.map((cardData, index) => \n\t\t\t\t\t\t\t<BrowseCard \n\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\timg={cardData.img} \n\t\t\t\t\t\t\t\tdescription={cardData.description} \n\t\t\t\t\t\t\t\tauthor={cardData.authorName} \n\t\t\t\t\t\t\t\trtitle={cardData.title} />\t\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer isLoaded={this.state.loadFooter} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n\n\n\n\n\n\nexport default Recipes;"]},"metadata":{},"sourceType":"module"}